var Ut=Object.defineProperty;var Fe=a=>{throw TypeError(a)};var Wt=(a,e,t)=>e in a?Ut(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Ve=(a,e,t)=>Wt(a,typeof e!="symbol"?e+"":e,t),$t=(a,e,t)=>e.has(a)||Fe("Cannot "+t);var J=(a,e,t)=>($t(a,e,"read from private field"),t?t.call(a):e.get(a)),Be=(a,e,t)=>e.has(a)?Fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t);const{AbortException:zt,AnnotationEditorLayer:Gt,AnnotationEditorParamsType:rs,AnnotationEditorType:O,AnnotationEditorUIManager:Xt,AnnotationLayer:Kt,AnnotationMode:H,AnnotationType:yt,applyOpacity:as,build:os,ColorPicker:ls,createValidAbsoluteUrl:Pt,CSSConstants:ds,DOMSVGFactory:hs,DrawLayer:Yt,FeatureTest:_t,fetchData:He,findContrastColor:us,getDocument:cs,getFilenameFromUrl:fs,getPdfFilenameFromUrl:Zt,getRGB:gs,getUuid:ps,getXfaPageViewport:ms,GlobalWorkerOptions:bs,ImageKind:ws,InvalidPDFException:Es,isDataScheme:vs,isPdfFile:Qt,isValidExplicitDest:Jt,MathClamp:xt,noContextMenu:ys,normalizeUnicode:qt,OPS:Ps,OutputScale:me,PagesMapper:ei,PasswordResponses:_s,PDFDataRangeTransport:xs,PDFDateString:Ss,PDFWorker:Cs,PermissionFlag:q,PixelsPerInch:U,RenderingCancelledException:Ae,renderRichText:Is,ResponseException:As,setLayerDimensions:St,shadow:le,SignatureExtractor:Ls,stopEvent:Le,SupportedImageMimeTypes:Rs,TextLayer:ti,TouchManager:Ts,updateUrlHash:ii,Util:ke,VerbosityLevel:Ns,version:Ue,XfaLayer:ye}=globalThis.pdfjsLib,ni="auto",Ct=1,We=1.1,si=.1,ri=10,Pe=0,ai=1.25,$e=40,ze=5,C={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ee={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},B={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},S={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},j={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function It(a,e,t=!1){let i=a.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}let n=a.offsetTop+a.clientTop,s=a.offsetLeft+a.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||t&&(i.classList.contains("markedContent")||getComputedStyle(i).overflow==="hidden");)if(n+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;if(e&&(e.top!==void 0&&(n+=e.top),e.left!==void 0)){if(t){const r=a.getBoundingClientRect().width,o=xt((i.clientWidth-r)/2,20,400);s+=e.left-o}else s+=e.left;i.scrollLeft=s}i.scrollTop=n}function oi(a,e,t=void 0){const i=function(r){s||(s=window.requestAnimationFrame(function(){s=null;const l=a.scrollLeft,d=n.lastX;l!==d&&(n.right=l>d),n.lastX=l;const h=a.scrollTop,f=n.lastY;h!==f&&(n.down=h>f),n.lastY=h,e(n)}))},n={right:!0,down:!0,lastX:a.scrollLeft,lastY:a.scrollTop,_eventHandler:i};let s=null;return a.addEventListener("scroll",i,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),n}function ve(a){const e=new Map;for(const[t,i]of new URLSearchParams(a))e.set(t.toLowerCase(),i);return e}const Ge=/[\x00-\x1F]/g;function re(a,e=!1){return Ge.test(a)?e?a.replaceAll(Ge,t=>t==="\0"?"":" "):a.replaceAll("\0",""):a}function de(a,e,t=0){let i=t,n=a.length-1;if(n<0||!e(a[n]))return a.length;if(e(a[i]))return i;for(;i<n;){const s=i+n>>1,r=a[s];e(r)?n=s:i=s+1}return i}function Xe(a){if(Math.floor(a)===a)return[a,1];const e=1/a,t=8;if(e>t)return[1,t];if(Math.floor(e)===e)return[1,e];const i=a>1?e:a;let n=0,s=1,r=1,o=1;for(;;){const d=n+r,h=s+o;if(h>t)break;i<=d/h?(r=d,o=h):(n=d,s=h)}let l;return i-n/s<r/o-i?l=i===a?[n,s]:[s,n]:l=i===a?[r,o]:[o,r],l}function ue(a,e){return a-a%e}function li(a,e,t){if(a<2)return a;let i=e[a].div,n=i.offsetTop+i.clientTop;n>=t&&(i=e[a-1].div,n=i.offsetTop+i.clientTop);for(let s=a-2;s>=0&&(i=e[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=n));--s)a=s;return a}function di({scrollEl:a,views:e,sortByVisibility:t=!1,horizontal:i=!1,rtl:n=!1}){const s=a.scrollTop,r=s+a.clientHeight,o=a.scrollLeft,l=o+a.clientWidth;function d(y){const b=y.div;return b.offsetTop+b.clientTop+b.clientHeight>s}function h(y){const b=y.div,m=b.offsetLeft+b.clientLeft,P=m+b.clientWidth;return n?m<l:P>o}const f=[],c=new Set,p=e.length;let E=de(e,i?h:d);E>0&&E<p&&!i&&(E=li(E,e,s));let v=i?l:-1;for(let y=E;y<p;y++){const b=e[y],m=b.div,P=m.offsetLeft+m.clientLeft,A=m.offsetTop+m.clientTop,T=m.clientWidth,L=m.clientHeight,g=P+T,w=A+L;if(v===-1)w>=r&&(v=w);else if((i?P:A)>v)break;if(w<=s||A>=r||g<=o||P>=l)continue;const I=Math.max(0,s-A),R=Math.max(0,o-P),N=I+Math.max(0,w-r),M=R+Math.max(0,g-l),k=(L-N)/L,Y=(T-M)/T,Oe=k*Y*100|0;f.push({id:b.id,x:P,y:A,visibleArea:Oe===100?null:{minX:R,minY:I,maxX:Math.min(g,l)-P,maxY:Math.min(w,r)-A},view:b,percent:Oe,widthPercent:Y*100|0}),c.add(b.id)}const _=f[0],x=f.at(-1);return t&&f.sort(function(y,b){const m=y.percent-b.percent;return Math.abs(m)>.001?-m:y.id-b.id}),{first:_,last:x,views:f,ids:c}}function At(a){return Number.isInteger(a)&&a%90===0}function hi(a){return Number.isInteger(a)&&Object.values(S).includes(a)&&a!==S.UNKNOWN}function ui(a){return Number.isInteger(a)&&Object.values(j).includes(a)&&a!==j.UNKNOWN}function Ke(a){return a.width<=a.height}new Promise(function(a){window.requestAnimationFrame(a)});const ci=document.documentElement.style;class fi{#e=null;#t=null;#s=0;#n=null;#i=!0;constructor(e){this.#e=e.classList,this.#n=e.style}get percent(){return this.#s}set percent(e){if(this.#s=e,isNaN(e)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#s}%`)}setWidth(e){if(!e)return;const i=e.parentNode.offsetWidth-e.offsetWidth;i>0&&this.#n.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(e=5e3){this.#s===100||isNaN(this.#s)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#i&&(this.#i=!1,this.#e.add("hidden"))}show(){this.#i||(this.#i=!0,this.#e.remove("hidden"))}}function gi(a){let e=S.VERTICAL,t=j.NONE;switch(a){case"SinglePage":e=S.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=S.PAGE;case"TwoColumnLeft":t=j.ODD;break;case"TwoPageRight":e=S.PAGE;case"TwoColumnRight":t=j.EVEN;break}return{scrollMode:e,spreadMode:t}}const ce=(function(){const a=document.createElement("div");return a.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)",a.style.width==="calc(1320px)"?Math.fround:e=>e})(),F={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function pi(a){return a<11904}function mi(a){return(a&65408)===0}function bi(a){return a>=97&&a<=122||a>=65&&a<=90}function wi(a){return a>=48&&a<=57}function Ei(a){return a===32||a===9||a===13||a===10}function vi(a){return a>=13312&&a<=40959||a>=63744&&a<=64255}function yi(a){return a>=12448&&a<=12543}function Pi(a){return a>=12352&&a<=12447}function _i(a){return a>=65376&&a<=65439}function xi(a){return(a&65408)===3584}function fe(a){return pi(a)?mi(a)?Ei(a)?F.SPACE:bi(a)||wi(a)||a===95?F.ALPHA_LETTER:F.PUNCT:xi(a)?F.THAI_LETTER:a===160?F.SPACE:F.ALPHA_LETTER:vi(a)?F.HAN_LETTER:yi(a)?F.KATAKANA_LETTER:Pi(a)?F.HIRAGANA_LETTER:_i(a)?F.HALFWIDTH_KATAKANA_LETTER:F.ALPHA_LETTER}let Si;function Ci(){return Si}const G={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Ii=250,Ai=-50,Ye={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},Ze=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let Qe;const Li=new RegExp("\\p{M}+","gu"),Ri=new RegExp("([+^$|])|(\\p{P}+)|(\\s+)|(\\p{M})|(\\p{L})","gu"),Ti=new RegExp("([^\\p{M}])\\p{M}*$","u"),Ni=new RegExp("^\\p{M}*([^\\p{M}])","u"),Mi=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Je=new Map,Di="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",qe=new Map;let _e=null,xe=null;function be(a,e={}){const t=[];let i;for(;(i=Mi.exec(a))!==null;){let{index:y}=i;for(const b of i[0]){let m=Je.get(b);m||(m=b.normalize("NFD").length,Je.set(b,m)),t.push([m,y++])}}const n=t.length>0,s=e.ignoreDashEOL??!1;let r;if(!n&&_e)r=_e;else if(n&&xe)r=xe;else{const y=Object.keys(Ye).join(""),b=Ci(),T=[`[${y}]`,`[${b}]`,"(?:゙|゚)\\n","\\p{M}+(?:-\\n)?","\\p{Ll}-\\n(?=\\p{Ll})|\\p{Lu}-\\n(?=\\p{L})","\\S-\\n","(?:\\p{Ideographic}|[぀-ヿ])\\n","\\n",n?Di:"\\u0000"];r=new RegExp(T.map(L=>`(${L})`).join("|"),"gum"),n?xe=r:_e=r}const o=[];for(;(i=Li.exec(a))!==null;)o.push([i[0].length,i.index]);let l=a.normalize("NFD");const d=[0,0];let h=0,f=0,c=0,p=0,E=0,v=!1;l=l.replace(r,(y,b,m,P,A,T,L,g,w,I,R)=>{if(R-=p,b){const N=Ye[b],M=N.length;for(let k=1;k<M;k++)d.push(R-c+k,c-k);return c-=M-1,N}if(m){let N=qe.get(m);N||(N=m.normalize("NFKC"),qe.set(m,N));const M=N.length;for(let k=1;k<M;k++)d.push(R-c+k,c-k);return c-=M-1,N}if(P)return v=!0,R+E===o[h]?.[1]?++h:(d.push(R-1-c+1,c-1),c-=1,p+=1),d.push(R-c+1,c),p+=1,E+=1,P.charAt(0);if(A){const N=A.endsWith(`
`),M=N?A.length-2:A.length;v=!0;let k=M;R+E===o[h]?.[1]&&(k-=o[h][0],++h);for(let Y=1;Y<=k;Y++)d.push(R-1-c+Y,c-Y);return c-=k,p+=k,N?(R+=M-1,d.push(R-c+1,1+c),c+=1,p+=1,E+=1,A.slice(0,M)):A}if(T){if(s)return p+=1,E+=1,T.slice(0,-1);const N=T.length-2;return d.push(R-c+N,1+c),c+=1,p+=1,E+=1,T.slice(0,-2)}if(L)return p+=1,E+=1,L.slice(0,-1);if(g){const N=g.length-1;return d.push(R-c+N,c),p+=1,E+=1,g.slice(0,-1)}if(w)return d.push(R-c+1,c-1),c-=1,p+=1,E+=1," ";if(R+E===t[f]?.[1]){const N=t[f][0]-1;++f;for(let M=1;M<=N;M++)d.push(R-(c-M),c-M);c-=N,p+=N}return I}),d.push(l.length,c);const _=new Uint32Array(d.length>>1),x=new Int32Array(d.length>>1);for(let y=0,b=d.length;y<b;y+=2)_[y>>1]=d[y],x[y>>1]=d[y+1];return[l,[_,x],v]}function Lt(a,e,t){if(!a)return[e,t];const[i,n]=a,s=e,r=e+t-1;let o=de(i,c=>c>=s);i[o]>s&&--o;let l=de(i,c=>c>=r,o);i[l]>r&&--l;const d=s+n[o],f=r+n[l]+1-d;return[d,f]}class ki{#e=null;#t=!0;#s=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){this._linkService=e,this._eventBus=t,this.#t=i,this.onIsPageVisible=null,this.#i(),t._on("find",this.#n.bind(this)),t._on("findbarclose",this.#g.bind(this)),t._on("pagesedited",this.#b.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#i(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#n(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(this.#e===null||this.#a(e))&&(this._dirtyMatch=!0),this.#e=e,i!=="highlightallchange"&&this.#v(G.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#h();const n=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#f():i==="again"?(this.#f(),n&&this.#e.highlightAll&&this.#c()):i==="highlightallchange"?(s?this.#f():this._highlightMatches=!0,this.#c()):this.#f():this._findTimeout=setTimeout(()=>{this.#f(),this._findTimeout=null},Ii)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!e)return;if(n===-1||n!==this._selected.matchIdx)return;if(i===-1||i!==this._selected.pageIdx)return;this._scrollMatches=!1,It(e,{top:Ai,left:t},!0)}#i(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#s=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#r(){const{query:e}=this.#e;return typeof e=="string"?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=be(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>be(t)[0])}#a(e){const t=e.query,i=this.#e.query,n=typeof t;if(n!==typeof i)return!0;if(n==="string"){if(t!==i)return!0}else if(JSON.stringify(t)!==JSON.stringify(i))return!0;switch(e.type){case"again":const r=this._selected.pageIdx+1,o=this._linkService;return r>=1&&r<=o.pagesCount&&r!==o.page&&!(this.onIsPageVisible?.(r)??!0);case"highlightallchange":return!1}return!0}#o(e,t,i){let n=e.slice(0,t).match(Ti);if(n){const s=e.charCodeAt(t),r=n[1].charCodeAt(0);if(fe(s)===fe(r))return!1}if(n=e.slice(t+i).match(Ni),n){const s=e.charCodeAt(t+i-1),r=n[1].charCodeAt(0);if(fe(s)===fe(r))return!1}return!0}#d(e,t){const{matchDiacritics:i}=this.#e;let n=!1;const s=(o,l)=>o===e?l:e.startsWith(o)?`${l}[ ]*`:e.endsWith(o)?`[ ]*${l}`:`[ ]*${l}[ ]*`;e=e.replaceAll(Ri,(o,l,d,h,f,c)=>l?s(l,RegExp.escape(l)):d?s(d,RegExp.escape(d)):h?"[ ]+":i?f||c:f?Ze.has(f.charCodeAt(0))?f:"":t?(n=!0,`${c}\\p{M}*`):c);const r="[ ]*";return e.endsWith(r)&&(e=e.slice(0,e.length-r.length)),i&&t&&(Qe||=String.fromCharCode(...Ze),n=!0,e=`${e}(?=[${Qe}]|[^\\p{M}]|$)`),[n,e]}#l(e){if(!this.#e)return;const t=this.#r;if(t.length===0)return;const i=this._pageContents[e],n=this.match(t,i,e),s=this._pageMatches[e]=[],r=this._pageMatchesLength[e]=[],o=this._pageDiffs[e];n?.forEach(({index:d,length:h})=>{const[f,c]=Lt(o,d,h);c&&(s.push(f),r.push(c))}),this.#e.highlightAll&&this.#p(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#u());const l=s.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#P():++this.#s===this._linkService.pagesCount&&this.#P()}match(e,t,i){const n=this._hasDiacritics[i];let s=!1;if(typeof e=="string"?[s,e]=this.#d(e,n):e=e.sort().reverse().map(f=>{const[c,p]=this.#d(f,n);return s||=c,`(${p})`}).join("|"),!e)return;const{caseSensitive:r,entireWord:o}=this.#e,l=`g${s?"u":""}${r?"":"i"}`;e=new RegExp(e,l);const d=[];let h;for(;(h=e.exec(t))!==null;)o&&!this.#o(t,h.index,h[0].length)||d.push({index:h.index,length:h[0].length});return d}#h(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0},i=this._pdfDocument;for(let n=0,s=this._linkService.pagesCount;n<s;n++){const{promise:r,resolve:o}=Promise.withResolvers();this._extractTextPromises[n]=r,e=e.then(async()=>{if(i!==this._pdfDocument){o();return}await i.getPage(n+1).then(l=>l.getTextContent(t)).then(l=>{const d=[];for(const h of l.items)d.push(h.str),h.hasEOL&&d.push(`
`);[this._pageContents[n],this._pageDiffs[n],this._hasDiacritics[n]]=be(d.join("")),o()},l=>{console.error(`Unable to get text content for page ${n+1}`,l),this._pageContents[n]="",this._pageDiffs[n]=null,this._hasDiacritics[n]=!1,o()})})}}#p(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#c(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#f(){const e=this.#e.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#s=0,this._matchesCountTotal=0,this.#c();for(let r=0;r<i;r++)this._pendingFindMatches.has(r)||(this._pendingFindMatches.add(r),this._extractTextPromises[r].then(()=>{this._pendingFindMatches.delete(r),this.#l(r)}))}if(this.#r.length===0){this.#v(G.FOUND);return}if(this._resumePageIdx)return;const s=this._offset;if(this._pagesToSearch=i,s.matchIdx!==null){const r=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<r||e&&s.matchIdx>0){s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,this.#E(!0);return}this.#w(e)}this.#u()}#m(e){const t=this._offset,i=e.length,n=this.#e.findPrevious;return i?(t.matchIdx=n?i-1:0,this.#E(!0),!0):(this.#w(n),t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0)?(this.#E(!1),!0):!1)}#u(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#m(e))}#w(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)}#E(e=!1){let t=G.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?G.WRAPPED:G.FOUND,n!==-1&&n!==this._selected.pageIdx&&this.#p(n)}this.#v(t,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#p(this._selected.pageIdx))}#b({pagesMapper:e}){if(this._extractTextPromises.length===0)return;this.#g(),this._dirtyMatch=!0;const t=this._extractTextPromises,i=this._extractTextPromises.length=[];for(let n=0,s=e.length;n<s;n++){const r=e.getPrevPageNumber(n+1)-1;r!==-1&&i.push(t[r]||Promise.resolve())}}#g(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#v(G.FOUND),this._highlightMatches=!1,this.#c())})}#y(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,n=this._matchesCountTotal;if(t!==-1){for(let s=0;s<e;s++)i+=this._pageMatches[s]?.length||0;i+=t+1}return(i<1||i>n)&&(i=n=0),{current:i,total:n}}#P(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#y()})}#v(e,t=!1){!this.#t&&(this.#s!==this._linkService.pagesCount||e===G.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#y(),rawQuery:this.#e?.query??null})}}const ji="noopener noreferrer nofollow",Z={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class Rt{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}async goToDestination(e){if(!this.pdfDocument)return;let t,i,n;if(typeof e=="string"?(t=e,i=await this.pdfDocument.getDestination(e)):(t=null,i=await e),!Array.isArray(i)){console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${e}".`);return}const[s]=i;if(s&&typeof s=="object"){if(n=this.pdfDocument.cachedPageNumber(s),!n)try{n=await this.pdfDocument.getPageIndex(s)+1}catch{console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${e}".`);return}}else Number.isInteger(s)&&(n=s+1);if(!n||n<1||n>this.pagesCount){console.error(`goToDestination: "${n}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:t,explicitDest:i,pageNumber:n})),this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom});const r=new AbortController;this.eventBus._on("textlayerrendered",o=>{o.pageNumber===n&&(o.source.textLayer.div.focus(),r.abort())},{signal:r.signal})}goToPage(e){if(!this.pdfDocument)return;const t=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})}goToXY(e,t,i,n={}){this.pdfViewer.scrollPageIntoView({pageNumber:e,destArray:[null,{name:"XYZ"},t,i],ignoreDestinationZoom:!0,...n})}addLinkAttributes(e,t,i=!1){if(!t||typeof t!="string")throw new Error('A valid "url" parameter must provided.');const n=i?Z.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let r="";switch(n){case Z.NONE:break;case Z.SELF:r="_self";break;case Z.BLANK:r="_blank";break;case Z.PARENT:r="_parent";break;case Z.TOP:r="_top";break}e.target=r,e.rel=typeof s=="string"?s:ji}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const n=ve(e);if(n.has("search")){const s=n.get("search").replaceAll('"',""),r=n.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:r?s:s.match(/\S+/g)})}if(n.has("page")&&(t=n.get("page")|0||1),n.has("zoom")){const s=n.get("zoom").split(","),r=s[0],o=parseFloat(r);r.includes("Fit")?r==="Fit"||r==="FitB"?i=[null,{name:r}]:r==="FitH"||r==="FitBH"||r==="FitV"||r==="FitBV"?i=[null,{name:r},s.length>1?s[1]|0:null]:r==="FitR"?s.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:r},s[1]|0,s[2]|0,s[3]|0,s[4]|0]:console.error(`PDFLinkService.setHash: "${r}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,o?o/100:r]}i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t),n.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")}),n.has("nameddest")&&this.goToDestination(n.get("nameddest"));return}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}if(typeof i=="string"||Jt(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:e})}}async executeSetOCGState(e){if(!this.pdfDocument)return;const t=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;t===this.pdfDocument&&(i.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))}}class je extends Rt{setDocument(e,t=null){}}class Tt{#e=null;#t=null;#s=!1;#n=null;#i=null;#r=!1;constructor({pdfPage:e,linkService:t,downloadManager:i,annotationStorage:n=null,imageResourcesPath:s="",renderForms:r=!0,enableComment:o=!1,commentManager:l=null,enableScripting:d=!1,hasJSActionsPromise:h=null,fieldObjectsPromise:f=null,annotationCanvasMap:c=null,accessibilityManager:p=null,annotationEditorUIManager:E=null,onAppend:v=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=r,this.annotationStorage=n,this.enableComment=o,this.#t=l,this.enableScripting=d,this._hasJSActionsPromise=h||Promise.resolve(!1),this._fieldObjectsPromise=f||Promise.resolve(null),this._annotationCanvasMap=c,this._accessibilityManager=p,this._annotationEditorUIManager=E,this.#n=v,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}async render({viewport:e,intent:t="display",structTreeLayer:i=null}){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:e.clone({dontFlip:!0})});return}const[n,s,r]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const o=this.div=document.createElement("div");if(o.className="annotationLayer",this.#n?.(o),this.#a(e,i),n.length===0){this.#e=n,St(this.div,e);return}await this.annotationLayer.render({annotations:n,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,downloadManager:this.downloadManager,enableComment:this.enableComment,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:r}),this.#e=n,this.linkService.isInPresentationMode&&this.#o(ee.FULLSCREEN),this.#i||(this.#i=new AbortController,this._eventBus?._on("presentationmodechanged",l=>{this.#o(l.state)},{signal:this.#i.signal}))}#a(e,t){this.annotationLayer=new Kt({div:this.div,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,annotationStorage:this.annotationStorage,page:this.pdfPage,viewport:e.clone({dontFlip:!0}),structTreeLayer:t,commentManager:this.#t,linkService:this.linkService})}cancel(){this._cancelled=!0,this.#i?.abort(),this.#i=null}hide(e=!1){this.#s=!e,this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}async injectLinkAnnotations(e){if(this.#e===null)throw new Error("`render` method must be called before `injectLinkAnnotations`.");if(this._cancelled||this.#r)return;this.#r=!0;const t=this.#e.length?this.#d(e):e;t.length&&(await this.annotationLayer.addLinkAnnotations(t),this.#s||(this.div.hidden=!1))}#o(e){if(!this.div)return;let t=!1;switch(e){case ee.FULLSCREEN:t=!0;break;case ee.NORMAL:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)}#d(e){function t(s){if(!s.quadPoints)return[s.rect];const r=[];for(let o=2,l=s.quadPoints.length;o<l;o+=8){const d=s.quadPoints[o],h=s.quadPoints[o+1],f=s.quadPoints[o+2],c=s.quadPoints[o+3];r.push([f,c,d,h])}return r}function i(s,r){const o=[],l=t(s),d=t(r);for(const h of l)for(const f of d){const c=ke.intersect(h,f);c&&o.push(c)}return o}function n(s){let r=0;for(const o of s)r+=Math.abs((o[2]-o[0])*(o[3]-o[1]));return r}return e.filter(s=>{let r;for(const o of this.#e){if(o.annotationType!==yt.LINK||!o.url)continue;const l=i(o,s);if(l.length!==0&&(r??=n(t(s)),n(l)/r>.5))return!1}return!0})}}function et(a,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=a,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class Oi{#e=new WeakMap;downloadData(e,t,i){const n=URL.createObjectURL(new Blob([e],{type:i}));et(n,t)}openOrDownloadData(e,t,i=null){const s=Qt(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,i){let n;if(e)n=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!Pt(t,"http://example.com")){console.error(`download - not a valid URL: ${t}`);return}n=t+"#pdfjs.action=download"}et(n,i)}}const tt={EVENT:"event",TIMEOUT:"timeout"};async function Fi({target:a,name:e,delay:t=0}){if(typeof a!="object"||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:i,resolve:n}=Promise.withResolvers(),s=new AbortController;function r(d){s.abort(),clearTimeout(l),n(d)}const o=a instanceof Nt?"_on":"addEventListener";a[o](e,r.bind(null,tt.EVENT),{signal:s.signal});const l=setTimeout(r.bind(null,tt.TIMEOUT),t);return i}class Nt{#e=Object.create(null);on(e,t,i=null){this._on(e,t,{external:!0,once:i?.once,signal:i?.signal})}off(e,t,i=null){this._off(e,t)}dispatch(e,t){const i=this.#e[e];if(!i||i.length===0)return;let n;for(const{listener:s,external:r,once:o}of i.slice(0)){if(o&&this._off(e,s),r){(n||=[]).push(s);continue}s(t)}if(n){for(const s of n)s(t);n=null}}_on(e,t,i=null){let n=null;if(i?.signal instanceof AbortSignal){const{signal:r}=i;if(r.aborted){console.error("Cannot use an `aborted` signal.");return}const o=()=>this._off(e,t);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}(this.#e[e]||=[]).push({listener:t,external:i?.external===!0,once:i?.once===!0,rmAbort:n})}_off(e,t,i=null){const n=this.#e[e];if(n)for(let s=0,r=n.length;s<r;s++){const o=n[s];if(o.listener===t){o.rmAbort?.(),n.splice(s,1);return}}}}class te{constructor(e){this.value=e}valueOf(){return this.value}}class D extends te{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class z extends te{constructor(e,t={}){super(e),this.opts=t}toString(e){if(e)try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){e.reportError(t)}return this.value.toString(10)}}class K extends te{static supportsValue(e){if(typeof e=="number"||e instanceof Date)return!0;if(e instanceof te)return K.supportsValue(e.valueOf());if("Temporal"in globalThis){const t=globalThis.Temporal;if(e instanceof t.Instant||e instanceof t.PlainDateTime||e instanceof t.PlainDate||e instanceof t.PlainMonthDay||e instanceof t.PlainTime||e instanceof t.PlainYearMonth)return!0}return!1}constructor(e,t={}){e instanceof K?(t={...e.opts,...t},e=e.value):e instanceof te&&(e=e.valueOf()),typeof e=="object"&&"calendarId"in e&&t.calendar===void 0&&(t={...t,calendar:e.calendarId}),super(e),this.opts=t}[Symbol.toPrimitive](e){return e==="string"?this.toString():this.toNumber()}toNumber(){const e=this.value;if(typeof e=="number")return e;if(e instanceof Date)return e.getTime();if("epochMilliseconds"in e)return e.epochMilliseconds;if("toZonedDateTime"in e)return e.toZonedDateTime("UTC").epochMilliseconds;throw new TypeError("Unwrapping a non-number value as a number")}toString(e){if(e)try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){e.reportError(t)}return typeof this.value=="number"||this.value instanceof Date?new Date(this.value).toISOString():this.value.toString()}}const it=100,Vi="⁨",Bi="⁩";function Hi(a,e,t){if(t===e||t instanceof z&&e instanceof z&&t.value===e.value)return!0;if(e instanceof z&&typeof t=="string"){let i=a.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===i)return!0}return!1}function nt(a,e,t){return e[t]?ne(a,e[t].value):(a.reportError(new RangeError("No default")),new D)}function Re(a,e){const t=[],i=Object.create(null);for(const n of e)n.type==="narg"?i[n.name]=he(a,n.value):t.push(he(a,n));return{positional:t,named:i}}function he(a,e){switch(e.type){case"str":return e.value;case"num":return new z(e.value,{minimumFractionDigits:e.precision});case"var":return Ui(a,e);case"mesg":return Wi(a,e);case"term":return $i(a,e);case"func":return zi(a,e);case"select":return Gi(a,e);default:return new D}}function Ui(a,{name:e}){let t;if(a.params)if(Object.prototype.hasOwnProperty.call(a.params,e))t=a.params[e];else return new D(`$${e}`);else if(a.args&&Object.prototype.hasOwnProperty.call(a.args,e))t=a.args[e];else return a.reportError(new ReferenceError(`Unknown variable: $${e}`)),new D(`$${e}`);if(t instanceof te)return t;switch(typeof t){case"string":return t;case"number":return new z(t);case"object":if(K.supportsValue(t))return new K(t);default:return a.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new D(`$${e}`)}}function Wi(a,{name:e,attr:t}){const i=a.bundle._messages.get(e);if(!i)return a.reportError(new ReferenceError(`Unknown message: ${e}`)),new D(e);if(t){const n=i.attributes[t];return n?ne(a,n):(a.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new D(`${e}.${t}`))}return i.value?ne(a,i.value):(a.reportError(new ReferenceError(`No value: ${e}`)),new D(e))}function $i(a,{name:e,attr:t,args:i}){const n=`-${e}`,s=a.bundle._terms.get(n);if(!s)return a.reportError(new ReferenceError(`Unknown term: ${n}`)),new D(n);if(t){const o=s.attributes[t];if(o){a.params=Re(a,i).named;const l=ne(a,o);return a.params=null,l}return a.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new D(`${n}.${t}`)}a.params=Re(a,i).named;const r=ne(a,s.value);return a.params=null,r}function zi(a,{name:e,args:t}){let i=a.bundle._functions[e];if(!i)return a.reportError(new ReferenceError(`Unknown function: ${e}()`)),new D(`${e}()`);if(typeof i!="function")return a.reportError(new TypeError(`Function ${e}() is not callable`)),new D(`${e}()`);try{let n=Re(a,t);return i(n.positional,n.named)}catch(n){return a.reportError(n),new D(`${e}()`)}}function Gi(a,{selector:e,variants:t,star:i}){let n=he(a,e);if(n instanceof D)return nt(a,t,i);for(const s of t){const r=he(a,s.key);if(Hi(a,n,r))return ne(a,s.value)}return nt(a,t,i)}function Mt(a,e){if(a.dirty.has(e))return a.reportError(new RangeError("Cyclic reference")),new D;a.dirty.add(e);const t=[],i=a.bundle._useIsolating&&e.length>1;for(const n of e){if(typeof n=="string"){t.push(a.bundle._transform(n));continue}if(a.placeables++,a.placeables>it)throw a.dirty.delete(e),new RangeError(`Too many placeables expanded: ${a.placeables}, max allowed is ${it}`);i&&t.push(Vi),t.push(he(a,n).toString(a)),i&&t.push(Bi)}return a.dirty.delete(e),t.join("")}function ne(a,e){return typeof e=="string"?a.bundle._transform(e):Mt(a,e)}class Xi{constructor(e,t,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=i}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let n=JSON.stringify(t);return i[n]||(i[n]=new e(this.bundle.locales,t)),i[n]}}function Te(a,e){const t=Object.create(null);for(const[i,n]of Object.entries(a))e.includes(i)&&(t[i]=n.valueOf());return t}const st=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Ki(a,e){let t=a[0];if(t instanceof D)return new D(`NUMBER(${t.valueOf()})`);if(t instanceof z)return new z(t.valueOf(),{...t.opts,...Te(e,st)});if(t instanceof K)return new z(t.toNumber(),{...Te(e,st)});throw new TypeError("Invalid argument to NUMBER")}const Yi=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Zi(a,e){let t=a[0];if(t instanceof D)return new D(`DATETIME(${t.valueOf()})`);if(t instanceof K||t instanceof z)return new K(t,Te(e,Yi));throw new TypeError("Invalid argument to DATETIME")}const rt=new Map;function Qi(a){const e=Array.isArray(a)?a.join(" "):a;let t=rt.get(e);return t===void 0&&(t=new Map,rt.set(e,t)),t}class Ji{constructor(e,{functions:t,useIsolating:i=!0,transform:n=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Ki,DATETIME:Zi,...t},this._useIsolating=i,this._transform=n,this._intls=Qi(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const i=[];for(let n=0;n<e.body.length;n++){let s=e.body[n];if(s.id.startsWith("-")){if(t===!1&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(t===!1&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(e,t=null,i=null){if(typeof e=="string")return this._transform(e);let n=new Xi(this,i,t);try{return Mt(n,e).toString(n)}catch(s){if(n.errors&&s instanceof Error)return n.errors.push(s),new D().toString(n);throw s}}}const Se=/^(-?[a-zA-Z][\w-]*) *= */gm,at=/\.([a-zA-Z][\w-]*) *= */y,qi=/\*?\[/y,Ce=/(-?[0-9]+(?:\.([0-9]+))?)/y,en=/([a-zA-Z][\w-]*)/y,ot=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,tn=/^[A-Z][A-Z0-9_-]*$/,ge=/([^{}\n\r]+)/y,nn=/([^\\"\n\r]*)/y,lt=/\\([\\"])/y,dt=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,sn=/^\n+/,ht=/ +$/,rn=/ *\r?\n/g,an=/( *)$/,on=/{\s*/y,ut=/\s*}/y,ln=/\[\s*/y,dn=/\s*] */y,hn=/\s*\(\s*/y,un=/\s*->\s*/y,cn=/\s*:\s*/y,fn=/\s*,?\s*/y,gn=/\s+/y;class pn{constructor(e){this.body=[],Se.lastIndex=0;let t=0;for(;;){let g=Se.exec(e);if(g===null)break;t=Se.lastIndex;try{this.body.push(l(g[1]))}catch(w){if(w instanceof SyntaxError)continue;throw w}}function i(g){return g.lastIndex=t,g.test(e)}function n(g,w){if(e[t]===g)return t++,!0;if(w)throw new w(`Expected ${g}`);return!1}function s(g,w){if(i(g))return t=g.lastIndex,!0;if(w)throw new w(`Expected ${g.toString()}`);return!1}function r(g){g.lastIndex=t;let w=g.exec(e);if(w===null)throw new SyntaxError(`Expected ${g.toString()}`);return t=g.lastIndex,w}function o(g){return r(g)[1]}function l(g){let w=h(),I=d();if(w===null&&Object.keys(I).length===0)throw new SyntaxError("Expected message value or attributes");return{id:g,value:w,attributes:I}}function d(){let g=Object.create(null);for(;i(at);){let w=o(at),I=h();if(I===null)throw new SyntaxError("Expected attribute value");g[w]=I}return g}function h(){let g;if(i(ge)&&(g=o(ge)),e[t]==="{"||e[t]==="}")return f(g?[g]:[],1/0);let w=A();return w?g?f([g,w],w.length):(w.value=T(w.value,sn),f([w],w.length)):g?T(g,ht):null}function f(g=[],w){for(;;){if(i(ge)){g.push(o(ge));continue}if(e[t]==="{"){g.push(c());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let M=A();if(M){g.push(M),w=Math.min(w,M.length);continue}break}let I=g.length-1,R=g[I];typeof R=="string"&&(g[I]=T(R,ht));let N=[];for(let M of g)M instanceof ct&&(M=M.value.slice(0,M.value.length-w)),M&&N.push(M);return N}function c(){s(on,SyntaxError);let g=p();if(s(ut))return g;if(s(un)){let w=_();return s(ut,SyntaxError),{type:"select",selector:g,...w}}throw new SyntaxError("Unclosed placeable")}function p(){if(e[t]==="{")return c();if(i(ot)){let[,g,w,I=null]=r(ot);if(g==="$")return{type:"var",name:w};if(s(hn)){let R=E();if(g==="-")return{type:"term",name:w,attr:I,args:R};if(tn.test(w))return{type:"func",name:w,args:R};throw new SyntaxError("Function names must be all upper-case")}return g==="-"?{type:"term",name:w,attr:I,args:[]}:{type:"mesg",name:w,attr:I}}return y()}function E(){let g=[];for(;;){switch(e[t]){case")":return t++,g;case void 0:throw new SyntaxError("Unclosed argument list")}g.push(v()),s(fn)}}function v(){let g=p();return g.type!=="mesg"?g:s(cn)?{type:"narg",name:g.name,value:y()}:g}function _(){let g=[],w=0,I;for(;i(qi);){n("*")&&(I=w);let R=x(),N=h();if(N===null)throw new SyntaxError("Expected variant value");g[w++]={key:R,value:N}}if(w===0)return null;if(I===void 0)throw new SyntaxError("Expected default variant");return{variants:g,star:I}}function x(){s(ln,SyntaxError);let g;return i(Ce)?g=b():g={type:"str",value:o(en)},s(dn,SyntaxError),g}function y(){if(i(Ce))return b();if(e[t]==='"')return m();throw new SyntaxError("Invalid expression")}function b(){let[,g,w=""]=r(Ce),I=w.length;return{type:"num",value:parseFloat(g),precision:I}}function m(){n('"',SyntaxError);let g="";for(;;){if(g+=o(nn),e[t]==="\\"){g+=P();continue}if(n('"'))return{type:"str",value:g};throw new SyntaxError("Unclosed string literal")}}function P(){if(i(lt))return o(lt);if(i(dt)){let[,g,w]=r(dt),I=parseInt(g||w,16);return I<=55295||57344<=I?String.fromCodePoint(I):"�"}throw new SyntaxError("Unknown escape sequence")}function A(){let g=t;switch(s(gn),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return L(e.slice(g,t))}return e[t-1]===" "?L(e.slice(g,t)):!1}function T(g,w){return g.replace(w,"")}function L(g){let w=g.replace(rn,`
`),I=an.exec(g)[1].length;return new ct(w,I)}}}class ct{constructor(e,t){this.value=e,this.length=t}}const mn=/<|&#?\w+;/,bn={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},wn={"http://www.w3.org/1999/xhtml":{global:["title","aria-description","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function En(a,e){const{value:t}=e;if(typeof t=="string")if(a.localName==="title"&&a.namespaceURI==="http://www.w3.org/1999/xhtml")a.textContent=t;else if(!mn.test(t))a.textContent=t;else{const i=a.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=t,vn(i.content,a)}Dt(e,a)}function vn(a,e){for(const t of a.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const i=Pn(e,t);a.replaceChild(i,t);continue}if(xn(t)){const i=_n(t);a.replaceChild(i,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),a.replaceChild(Ne(t),t)}e.textContent="",e.appendChild(a)}function yn(a,e){if(!a)return!1;for(let t of a)if(t.name===e)return!0;return!1}function Dt(a,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(const i of Array.from(e.attributes))ft(i.name,e,t)&&!yn(a.attributes,i.name)&&e.removeAttribute(i.name);if(a.attributes)for(const i of Array.from(a.attributes))ft(i.name,e,t)&&e.getAttribute(i.name)!==i.value&&e.setAttribute(i.name,i.value)}function Pn(a,e){const t=e.getAttribute("data-l10n-name"),i=a.querySelector(`[data-l10n-name="${t}"]`);if(!i)return console.warn(`An element named "${t}" wasn't found in the source.`),Ne(e);if(i.localName!==e.localName)return console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${i.localName}).`),Ne(e);a.removeChild(i);const n=i.cloneNode(!1);return kt(e,n)}function _n(a){const e=a.ownerDocument.createElement(a.localName);return kt(a,e)}function Ne(a){return a.ownerDocument.createTextNode(a.textContent)}function xn(a){const e=bn[a.namespaceURI];return e&&e.includes(a.localName)}function ft(a,e,t=null){if(t&&t.includes(a))return!0;const i=wn[e.namespaceURI];if(!i)return!1;const n=a.toLowerCase(),s=e.localName;if(i.global.includes(n))return!0;if(!i[s])return!1;if(i[s].includes(n))return!0;if(e.namespaceURI==="http://www.w3.org/1999/xhtml"&&s==="input"&&n==="value"){const r=e.type.toLowerCase();if(r==="submit"||r==="button"||r==="reset")return!0}return!1}function kt(a,e){return e.textContent=a.textContent,Dt(a,e),e}class Sn extends Array{static from(e){return e instanceof this?e:new this(e)}}class Cn extends Sn{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else if(Symbol.iterator in Object(e))this.iterator=e[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){const e=this;let t=0;return{async next(){return e.length<=t&&e.push(e.iterator.next()),e[t++]}}}async touchNext(e=1){let t=0;for(;t++<e;){const i=this[this.length-1];if(i&&(await i).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class In{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}async formatWithFallback(e,t){const i=[];let n=!1;for await(const s of this.bundles){n=!0;const r=Rn(t,s,e,i);if(r.size===0)break;if(typeof console<"u"){const o=s.locales[0],l=Array.from(r).join(", ");console.warn(`[fluent] Missing translations in ${o}: ${l}`)}}return!n&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(e)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i}formatMessages(e){return this.formatWithFallback(e,Ln)}formatValues(e){return this.formatWithFallback(e,An)}async formatValue(e,t){const[i]=await this.formatValues([{id:e,args:t}]);return i}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=Cn.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function An(a,e,t,i){return t.value?a.formatPattern(t.value,i,e):null}function Ln(a,e,t,i){const n={value:null,attributes:null};t.value&&(n.value=a.formatPattern(t.value,i,e));let s=Object.keys(t.attributes);if(s.length>0){n.attributes=new Array(s.length);for(let[r,o]of s.entries()){let l=a.formatPattern(t.attributes[o],i,e);n.attributes[r]={name:o,value:l}}}return n}function Rn(a,e,t,i){const n=[],s=new Set;return t.forEach(({id:r,args:o},l)=>{if(i[l]!==void 0)return;let d=e.getMessage(r);if(d){if(n.length=0,i[l]=a(e,n,d,o),n.length>0&&typeof console<"u"){const h=e.locales[0],f=n.join(", ");console.warn(`[fluent][resolver] errors in ${h}/${r}: ${f}.`)}}else s.add(r)}),s}const Q="data-l10n-id",se="data-l10n-args",Tn=`[${Q}]`;class Nn extends In{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Q,se]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,i){return e.setAttribute(Q,t),i?e.setAttribute(se,JSON.stringify(i)):e.removeAttribute(se),e}getAttributes(e){return{id:e.getAttribute(Q),args:JSON.parse(e.getAttribute(se)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const i of t.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(const n of this.getTranslatables(i))this.pendingElements.add(n);else i.hasAttribute(Q)&&this.pendingElements.add(i);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}async translateElements(e){if(!e.length)return;const t=e.map(this.getKeysForElement),i=await this.formatMessages(t);return this.applyTranslations(e,i)}applyTranslations(e,t){this.pauseObserving();for(let i=0;i<e.length;i++)t[i]!==void 0&&En(e[i],t[i]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(Tn));return typeof e.hasAttribute=="function"&&e.hasAttribute(Q)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(Q),args:JSON.parse(e.getAttribute(se)||null)}}}class we{#e;#t;#s;#n;constructor({lang:e,isRTL:t},i=null){this.#s=we.#i(e),this.#n=i,this.#e=t??we.#r(this.#s)?"rtl":"ltr"}_setL10n(e){this.#n=e}getLanguage(){return this.#s}getDirection(){return this.#e}async get(e,t=null,i){return Array.isArray(e)?(e=e.map(r=>({id:r})),(await this.#n.formatMessages(e)).map(r=>r.value)):(await this.#n.formatMessages([{id:e,args:t}]))[0]?.value||i}async translate(e){(this.#t||=new Set).add(e);try{this.#n.connectRoot(e),await this.#n.translateRoots()}catch{}}async translateOnce(e){try{await this.#n.translateElements([e])}catch(t){console.error("translateOnce:",t)}}async destroy(){if(this.#t){for(const e of this.#t)this.#n.disconnectRoot(e);this.#t.clear(),this.#t=null}this.#n.pauseObserving()}pause(){this.#n.pauseObserving()}resume(){this.#n.resumeObserving()}static#i(e){return e=e?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e]||e}static#r(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function Mn(){const{isAndroid:a,isLinux:e,isMac:t,isWindows:i}=_t.platform;return e?"linux":i?"windows":t?"macos":a?"android":"other"}function gt(a,e){const t=new pn(e),i=new Ji(a,{functions:{PLATFORM:Mn}}),n=i.addResource(t);return n.length&&console.error("L10n errors",n),i}class $ extends we{constructor(e){super({lang:e});const t=e?$.#e.bind($,"en-us",this.getLanguage()):$.#n.bind($,this.getLanguage());this._setL10n(new Nn([],t))}static async*#e(e,t){const{baseURL:i,paths:n}=await this.#s(),s=[t];if(e!==t){const o=t.split("-",1)[0];o!==t&&s.push(o),s.push(e)}const r=s.map(o=>[o,this.#t(o,i,n)]);for(const[o,l]of r){const d=await l;d?yield d:o==="en-us"&&(yield this.#i(o))}}static async#t(e,t,i){const n=i[e];if(!n)return null;const s=new URL(n,t),r=await He(s,"text");return gt(e,r)}static async#s(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=await He(e,"json");return{baseURL:e.substring(0,e.lastIndexOf("/")+1)||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}}static async*#n(e){yield this.#i(e)}static async#i(e){return gt(e,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties…
pdfjs-document-properties-button-label = Document Properties…
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)
pdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing…
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document…
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-color-picker-free-text-input =
    .title = Change text color
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-color-picker-ink-input =
    .title = Change drawing color
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-comment-floating-button =
    .title = Comment
    .aria-label = Comment
pdfjs-comment-floating-button-label = Comment
pdfjs-editor-comment-button =
    .title = Comment
    .aria-label = Comment
pdfjs-editor-comment-button-label = Comment
pdfjs-editor-signature-button =
    .title = Add signature
pdfjs-editor-signature-button-label = Add signature
pdfjs-editor-highlight-editor =
    .aria-label = Highlight editor
pdfjs-editor-ink-editor =
    .aria-label = Drawing editor
pdfjs-editor-signature-editor1 =
    .aria-description = Signature editor: { $description }
pdfjs-editor-stamp-editor =
    .aria-label = Image editor
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-remove-signature-button =
    .title = Remove signature
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-editor-add-signature-container =
    .aria-label = Signature controls and saved signatures
pdfjs-editor-signature-add-signature-button =
    .title = Add new signature
pdfjs-editor-signature-add-signature-button-label = Add new signature
pdfjs-editor-add-saved-signature-button =
    .title = Saved signature: { $description }
pdfjs-free-text2 =
    .aria-label = Text Editor
    .default-content = Start typing…
pdfjs-editor-comments-sidebar-title =
    { $count ->
        [one] Comment
       *[other] Comments
    }
pdfjs-editor-comments-sidebar-close-button =
    .title = Close the sidebar
    .aria-label = Close the sidebar
pdfjs-editor-comments-sidebar-close-button-label = Close the sidebar
pdfjs-editor-comments-sidebar-no-comments1 = See something noteworthy? Highlight it and leave a comment.
pdfjs-editor-comments-sidebar-no-comments-link = Learn more
pdfjs-editor-alt-text-button =
    .aria-label = Alt text
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button =
    .aria-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, “A young man sits down at a table to eat a meal”
pdfjs-editor-resizer-top-left =
    .aria-label = Top left corner — resize
pdfjs-editor-resizer-top-middle =
    .aria-label = Top middle — resize
pdfjs-editor-resizer-top-right =
    .aria-label = Top right corner — resize
pdfjs-editor-resizer-middle-right =
    .aria-label = Middle right — resize
pdfjs-editor-resizer-bottom-right =
    .aria-label = Bottom right corner — resize
pdfjs-editor-resizer-bottom-middle =
    .aria-label = Bottom middle — resize
pdfjs-editor-resizer-bottom-left =
    .aria-label = Bottom left corner — resize
pdfjs-editor-resizer-middle-left =
    .aria-label = Middle left — resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all
pdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)
pdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)
pdfjs-editor-new-alt-text-textarea =
    .placeholder = Write your description here…
pdfjs-editor-new-alt-text-description = Short description for people who can’t see the image or when the image doesn’t load.
pdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.
pdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more
pdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically
pdfjs-editor-new-alt-text-not-now-button = Not now
pdfjs-editor-new-alt-text-error-title = Couldn’t create alt text automatically
pdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.
pdfjs-editor-new-alt-text-error-close-button = Close
pdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
pdfjs-editor-new-alt-text-added-button =
    .aria-label = Alt text added
pdfjs-editor-new-alt-text-added-button-label = Alt text added
pdfjs-editor-new-alt-text-missing-button =
    .aria-label = Missing alt text
pdfjs-editor-new-alt-text-missing-button-label = Missing alt text
pdfjs-editor-new-alt-text-to-review-button =
    .aria-label = Review alt text
pdfjs-editor-new-alt-text-to-review-button-label = Review alt text
pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }
pdfjs-image-alt-text-settings-button =
    .title = Image alt text settings
pdfjs-image-alt-text-settings-button-label = Image alt text settings
pdfjs-editor-alt-text-settings-dialog-label = Image alt text settings
pdfjs-editor-alt-text-settings-automatic-title = Automatic alt text
pdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically
pdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can’t see the image or when the image doesn’t load.
pdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)
pdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.
pdfjs-editor-alt-text-settings-delete-model-button = Delete
pdfjs-editor-alt-text-settings-download-model-button = Download
pdfjs-editor-alt-text-settings-downloading-model-button = Downloading…
pdfjs-editor-alt-text-settings-editor-title = Alt text editor
pdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image
pdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.
pdfjs-editor-alt-text-settings-close-button = Close
pdfjs-editor-highlight-added-alert = Highlight added
pdfjs-editor-freetext-added-alert = Text added
pdfjs-editor-ink-added-alert = Drawing added
pdfjs-editor-stamp-added-alert = Image added
pdfjs-editor-signature-added-alert = Signature added
pdfjs-editor-undo-bar-message-highlight = Highlight removed
pdfjs-editor-undo-bar-message-freetext = Text removed
pdfjs-editor-undo-bar-message-ink = Drawing removed
pdfjs-editor-undo-bar-message-stamp = Image removed
pdfjs-editor-undo-bar-message-signature = Signature removed
pdfjs-editor-undo-bar-message-comment = Comment removed
pdfjs-editor-undo-bar-message-multiple =
    { $count ->
        [one] { $count } annotation removed
       *[other] { $count } annotations removed
    }
pdfjs-editor-undo-bar-undo-button =
    .title = Undo
pdfjs-editor-undo-bar-undo-button-label = Undo
pdfjs-editor-undo-bar-close-button =
    .title = Close
pdfjs-editor-undo-bar-close-button-label = Close
pdfjs-editor-add-signature-dialog-label = This modal allows the user to create a signature to add to a PDF document. The user can edit the name (which also serves as the alt text), and optionally save the signature for repeated use.
pdfjs-editor-add-signature-dialog-title = Add a signature
pdfjs-editor-add-signature-type-button = Type
    .title = Type
pdfjs-editor-add-signature-draw-button = Draw
    .title = Draw
pdfjs-editor-add-signature-image-button = Image
    .title = Image
pdfjs-editor-add-signature-type-input =
    .aria-label = Type your signature
    .placeholder = Type your signature
pdfjs-editor-add-signature-draw-placeholder = Draw your signature
pdfjs-editor-add-signature-draw-thickness-range-label = Thickness
pdfjs-editor-add-signature-draw-thickness-range =
    .title = Drawing thickness: { $thickness }
pdfjs-editor-add-signature-image-placeholder = Drag a file here to upload
pdfjs-editor-add-signature-image-browse-link =
    { PLATFORM() ->
        [macos] Or choose image files
       *[other] Or browse image files
    }
pdfjs-editor-add-signature-description-label = Description (alt text)
pdfjs-editor-add-signature-description-input =
    .title = Description (alt text)
pdfjs-editor-add-signature-description-default-when-drawing = Signature
pdfjs-editor-add-signature-clear-button-label = Clear signature
pdfjs-editor-add-signature-clear-button =
    .title = Clear signature
pdfjs-editor-add-signature-save-checkbox = Save signature
pdfjs-editor-add-signature-save-warning-message = You’ve reached the limit of 5 saved signatures. Remove one to save more.
pdfjs-editor-add-signature-image-upload-error-title = Couldn’t upload image
pdfjs-editor-add-signature-image-upload-error-description = Check your network connection or try another image.
pdfjs-editor-add-signature-image-no-data-error-title = Can’t convert this image into a signature
pdfjs-editor-add-signature-image-no-data-error-description = Please try uploading a different image.
pdfjs-editor-add-signature-error-close-button = Close
pdfjs-editor-add-signature-cancel-button = Cancel
pdfjs-editor-add-signature-add-button = Add
pdfjs-editor-delete-signature-button1 =
    .title = Remove saved signature
pdfjs-editor-delete-signature-button-label1 = Remove saved signature
pdfjs-editor-add-signature-edit-button-label = Edit description
pdfjs-editor-edit-signature-dialog-title = Edit description
pdfjs-editor-edit-signature-update-button = Update
pdfjs-show-comment-button =
    .title = Show comment
pdfjs-editor-edit-comment-popup-button-label = Edit comment
pdfjs-editor-edit-comment-popup-button =
    .title = Edit comment
pdfjs-editor-delete-comment-popup-button-label = Remove comment
pdfjs-editor-delete-comment-popup-button =
    .title = Remove comment
pdfjs-editor-edit-comment-dialog-title-when-editing = Edit comment
pdfjs-editor-edit-comment-dialog-save-button-when-editing = Update
pdfjs-editor-edit-comment-dialog-title-when-adding = Add comment
pdfjs-editor-edit-comment-dialog-save-button-when-adding = Add
pdfjs-editor-edit-comment-dialog-text-input =
    .placeholder = Start typing…
pdfjs-editor-edit-comment-dialog-cancel-button = Cancel
pdfjs-editor-add-comment-button =
    .title = Add comment
pdfjs-toggle-views-manager-button =
    .title = Toggle Sidebar
pdfjs-toggle-views-manager-notification-button =
    .title = Toggle Sidebar (document contains thumbnails/outline/attachments/layers)
pdfjs-toggle-views-manager-button-label = Toggle Sidebar
pdfjs-views-manager-sidebar =
    .aria-label = Sidebar
pdfjs-views-manager-view-selector-button =
    .title = Views
pdfjs-views-manager-view-selector-button-label = Views
pdfjs-views-manager-pages-title = Pages
pdfjs-views-manager-outlines-title = Document outline
pdfjs-views-manager-attachments-title = Attachments
pdfjs-views-manager-layers-title = Layers
pdfjs-views-manager-pages-option-label = Pages
pdfjs-views-manager-outlines-option-label = Document outline
pdfjs-views-manager-attachments-option-label = Attachments
pdfjs-views-manager-layers-option-label = Layers
pdfjs-views-manager-add-file-button =
    .title = Add file
pdfjs-views-manager-add-file-button-label = Add file
pdfjs-views-manager-pages-status-action-label =
    { $count ->
        [one] { $count } selected
        *[other] { $count } selected
    }
pdfjs-views-manager-pages-status-none-action-label = Select pages
pdfjs-views-manager-pages-status-action-button-label = Manage
pdfjs-views-manager-pages-status-copy-button-label = Copy
pdfjs-views-manager-pages-status-cut-button-label = Cut
pdfjs-views-manager-pages-status-delete-button-label = Delete
pdfjs-views-manager-pages-status-save-as-button-label = Save as…
pdfjs-views-manager-status-undo-cut-label =
    { $count ->
        [one] 1 page cut
        *[other] { $count } pages cut
    }
pdfjs-views-manager-pages-status-undo-copy-label =
    { $count ->
        [one] 1 page copied
        *[other] { $count } pages copied
    }
pdfjs-views-manager-pages-status-undo-delete-label =
    { $count ->
        [one] 1 page deleted
        *[other] { $count } pages deleted
    }
pdfjs-views-manager-pages-status-waiting-ready-label = Getting your file ready…
pdfjs-views-manager-pages-status-waiting-uploading-label = Uploading file…
pdfjs-views-manager-status-warning-cut-label = Couldn’t cut. Refresh page and try again.
pdfjs-views-manager-status-warning-copy-label = Couldn’t copy. Refresh page and try again.
pdfjs-views-manager-status-warning-delete-label = Couldn’t delete. Refresh page and try again.
pdfjs-views-manager-status-warning-save-label = Couldn’t save. Refresh page and try again.
pdfjs-views-manager-status-undo-button-label = Undo
pdfjs-views-manager-status-close-button =
    .title = Close
pdfjs-views-manager-status-close-button-label = Close`)}}const Dn=1e3,kn=50,jn=1e3;function Ie(){return document.location.hash}class On{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||typeof e!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const n=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=i===!0,this._initialized=!0,this.#h();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=Ie(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#i(s,!0)||t){const{hash:o,page:l,rotation:d}=this.#a(!0);if(!o||n||t){this.#t(null,!0);return}this.#t({hash:o,page:l,rotation:d},!0);return}const r=s.destination;this.#r(r,s.uid,!0),r.rotation!==void 0&&(this._initialRotation=r.rotation),r.dest?(this._initialBookmark=JSON.stringify(r.dest),this._destination.page=null):r.hash?this._initialBookmark=r.hash:r.page&&(this._initialBookmark=`page=${r.page}`)}reset(){this._initialized&&(this.#l(),this._initialized=!1,this.#p()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&typeof e!="string"){console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);return}else if(Array.isArray(t)){if(!this.#n(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);return}const n=e||JSON.stringify(t);if(!n)return;let s=!1;if(this._destination&&(Fn(this._destination.hash,n)||Vn(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:n,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#n(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#s()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#i(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#i(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const i=t||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};this.#r(e,n.uid);let s;if(this._updateUrl&&e?.hash){const{href:r,protocol:o}=document.location;o!=="file:"&&(s=ii(r,e.hash))}i?window.history.replaceState(n,"",s):window.history.pushState(n,"",s)}#s(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination){this.#t(t);return}if(this._destination.temporary){this.#t(t,!0);return}if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=kn)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this.#t(t,i)}#n(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#i(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint)if(t){if(typeof e.fingerprint!="string"||e.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(e.uid)||e.uid<0||e.destination===null||typeof e.destination!="object")}#r(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#a(e=!1){const t=unescape(Ie()).substring(1),i=ve(t),n=i.get("nameddest")||"";let s=i.get("page")|0;return(!this.#n(s)||e&&n.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#o({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#s(!0),this._updateViewareaTimeout=null},jn))}#d({state:e}){const t=Ie(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:s,page:r,rotation:o}=this.#a();this.#t({hash:s,page:r,rotation:o},!0);return}if(!this.#i(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,Fi({target:window,name:"hashchange",delay:Dn}).then(()=>{this._blockHashChange--}));const n=e.destination;this.#r(n,e.uid,!0),At(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#l(){(!this._destination||this._destination.temporary)&&this.#s()}#h(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#o.bind(this),{signal:e}),window.addEventListener("popstate",this.#d.bind(this),{signal:e}),window.addEventListener("pagehide",this.#l.bind(this),{signal:e})}#p(){this.#e?.abort(),this.#e=null}}function Fn(a,e){return typeof a!="string"||typeof e!="string"?!1:a===e||ve(a).get("nameddest")===e}function Vn(a,e){function t(i,n){if(typeof i!=typeof n||Array.isArray(i)||Array.isArray(n))return!1;if(i!==null&&typeof i=="object"&&n!==null){if(Object.keys(i).length!==Object.keys(n).length)return!1;for(const s in i)if(!t(i[s],n[s]))return!1;return!0}return i===n||Number.isNaN(i)&&Number.isNaN(n)}if(!(Array.isArray(a)&&Array.isArray(e))||a.length!==e.length)return!1;for(let i=0,n=a.length;i<n;i++)if(!t(a[i],e[i]))return!1;return!0}class Bn{#e=null;#t=null;#s=null;#n=null;#i=null;#r;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new $,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#r=e.uiManager,this.#e=e.annotationLayer||null,this.#i=e.textLayer||null,this.#t=e.drawLayer||null,this.#s=e.onAppend||null,this.#n=e.structTreeLayer||null}async render({viewport:e,intent:t="display"}){if(t!=="display"||this._cancelled)return;const i=e.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:i}),this.show();return}const n=this.div=document.createElement("div");n.className="annotationEditorLayer",n.hidden=!0,n.dir=this.#r.direction,this.#s?.(n),this.annotationEditorLayer=new Gt({uiManager:this.#r,div:n,structTreeLayer:this.#n,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:this.#e,textLayer:this.#i,drawLayer:this.#t});const s={viewport:i,div:n,annotations:null,intent:t};this.annotationEditorLayer.render(s),this.show()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.annotationEditorLayer.pause(!0),this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1,this.annotationEditorLayer.pause(!1))}}{var Me=new Map;const{maxTouchPoints:a,platform:e,userAgent:t}=navigator,i=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||e==="MacIntel"&&a>1||i)&&Me.set("maxCanvasPixels",5242880),i&&Me.set("useSystemFonts",!1)}const u={BROWSER:1,VIEWER:2,API:4,WORKER:8,EVENT_DISPATCH:16,PREFERENCE:128},De={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},W={allowedGlobalEvents:{value:null,kind:u.BROWSER},canvasMaxAreaInBytes:{value:-1,kind:u.BROWSER+u.API},isInAutomation:{value:!1,kind:u.BROWSER},localeProperties:{value:{lang:navigator.language||"en-US"},kind:u.BROWSER},maxCanvasDim:{value:32767,kind:u.BROWSER+u.VIEWER},nimbusDataStr:{value:"",kind:u.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:u.BROWSER},supportsDocumentFonts:{value:!0,kind:u.BROWSER},supportsIntegratedFind:{value:!1,kind:u.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:u.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:u.BROWSER},supportsPinchToZoom:{value:!0,kind:u.BROWSER},supportsPrinting:{value:!0,kind:u.BROWSER},toolbarDensity:{value:0,kind:u.BROWSER+u.EVENT_DISPATCH},altTextLearnMoreUrl:{value:"",kind:u.VIEWER+u.PREFERENCE},annotationEditorMode:{value:0,kind:u.VIEWER+u.PREFERENCE},annotationMode:{value:2,kind:u.VIEWER+u.PREFERENCE},capCanvasAreaFactor:{value:200,kind:u.VIEWER+u.PREFERENCE},commentLearnMoreUrl:{value:"",kind:u.VIEWER+u.PREFERENCE},cursorToolOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:u.VIEWER},defaultZoomDelay:{value:400,kind:u.VIEWER+u.PREFERENCE},defaultZoomValue:{value:"",kind:u.VIEWER+u.PREFERENCE},disableHistory:{value:!1,kind:u.VIEWER},disablePageLabels:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableAltText:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableAltTextModelDownload:{value:!0,kind:u.VIEWER+u.PREFERENCE+u.EVENT_DISPATCH},enableAutoLinking:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableComment:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableDetailCanvas:{value:!0,kind:u.VIEWER},enableGuessAltText:{value:!0,kind:u.VIEWER+u.PREFERENCE+u.EVENT_DISPATCH},enableHighlightFloatingButton:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableNewAltTextWhenAddingImage:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableOptimizedPartialRendering:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePermissions:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableScripting:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableSignatureEditor:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableSplitMerge:{value:!1,kind:u.VIEWER+u.PREFERENCE},enableUpdatedAddImage:{value:!1,kind:u.VIEWER+u.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:u.VIEWER},externalLinkTarget:{value:0,kind:u.VIEWER+u.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F,yellow_HCM=#FFFFCC,green_HCM=#53FFBC,blue_HCM=#80EBFF,pink_HCM=#F6B8FF,red_HCM=#C50043",kind:u.VIEWER+u.PREFERENCE},historyUpdateUrl:{value:!1,kind:u.VIEWER+u.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},imageResourcesPath:{value:"./images/",kind:u.VIEWER},maxCanvasPixels:{value:2**25,kind:u.VIEWER},minDurationToUpdateCanvas:{value:500,kind:u.VIEWER},forcePageColors:{value:!1,kind:u.VIEWER+u.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:u.VIEWER+u.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:u.VIEWER+u.PREFERENCE},pdfBugEnabled:{value:!1,kind:u.VIEWER+u.PREFERENCE},printResolution:{value:150,kind:u.VIEWER},sidebarViewOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},scrollModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},spreadModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},textLayerMode:{value:1,kind:u.VIEWER+u.PREFERENCE},viewerCssTheme:{value:0,kind:u.VIEWER+u.PREFERENCE},viewOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},cMapPacked:{value:!0,kind:u.API},cMapUrl:{value:"../web/cmaps/",kind:u.API},disableAutoFetch:{value:!1,kind:u.API+u.PREFERENCE},disableFontFace:{value:!1,kind:u.API+u.PREFERENCE},disableRange:{value:!1,kind:u.API+u.PREFERENCE},disableStream:{value:!1,kind:u.API+u.PREFERENCE},docBaseUrl:{value:"",kind:u.API},enableHWA:{value:!0,kind:u.API+u.VIEWER+u.PREFERENCE},enableXfa:{value:!0,kind:u.API+u.PREFERENCE},fontExtraProperties:{value:!1,kind:u.API},iccUrl:{value:"../web/iccs/",kind:u.API},isEvalSupported:{value:!0,kind:u.API},isOffscreenCanvasSupported:{value:!0,kind:u.API},maxImageSize:{value:-1,kind:u.API},pdfBug:{value:!1,kind:u.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:u.API},useSystemFonts:{value:void 0,kind:u.API,type:De.BOOLEAN+De.UNDEFINED},verbosity:{value:1,kind:u.API},wasmUrl:{value:"../web/wasm/",kind:u.API},workerPort:{value:null,kind:u.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:u.WORKER}};W.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:u.VIEWER},W.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:u.VIEWER},W.enableFakeMLManager={value:!0,kind:u.VIEWER};W.disablePreferences={value:!1,kind:u.VIEWER};var X;const V=class V{static get(e){return J(this,X).get(e)}static getAll(e=null,t=!1){const i=Object.create(null);for(const n in W){const s=W[n];e&&!(e&s.kind)||(i[n]=t?s.value:J(this,X).get(n))}return i}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){this._hasInvokedSet||=!0;let i;for(const n in e){const s=W[n],r=e[n];if(!s||!(typeof r==typeof s.value||De[(typeof r).toUpperCase()]&s.type))continue;const{kind:o}=s;t&&!(o&u.BROWSER||o&u.PREFERENCE)||(this.eventBus&&o&u.EVENT_DISPATCH&&(i||=new Map).set(n,r),J(this,X).set(n,r))}if(i)for(const[n,s]of i)this.eventBus.dispatch(n.toLowerCase(),{source:this,value:s})}};X=new WeakMap,Ve(V,"eventBus"),Be(V,X,new Map),(()=>{for(const e in W)J(V,X).set(e,W[e].value);for(const[e,t]of Me)J(V,X).set(e,t);V._hasInvokedSet=!1,V._checkDisablePreferences=()=>V.get("disablePreferences")?!0:(V._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)})();let ae=V;function pt({width:a,height:e,left:t,top:i},n){if(a===0||e===0)return null;const s=n.textLayer.div.getBoundingClientRect(),r=n.getPagePoint(t-s.left,i-s.top),o=n.getPagePoint(t-s.left+a,i-s.top+e);return ke.normalizeRect([r[0],r[1],o[0],o[1]])}function Hn(a,e){const t=a.getClientRects();if(t.length===1)return{rect:pt(t[0],e)};const i=[1/0,1/0,-1/0,-1/0],n=[];let s=0;for(const r of t){const o=pt(r,e);o!==null&&(n[s]=n[s+4]=o[0],n[s+1]=n[s+3]=o[3],n[s+2]=n[s+6]=o[2],n[s+5]=n[s+7]=o[1],ke.rectBoundingBox(...o,i),s+=8)}return{quadPoints:n,rect:i}}function mt(a,e){let t=a;do{if(t.nodeType===Node.TEXT_NODE){const i=t.textContent.length;if(e<=i)return[t,e];e-=i}else if(t.firstChild){t=t.firstChild;continue}for(;!t.nextSibling&&t!==a;)t=t.parentNode;t!==a&&(t=t.nextSibling)}while(t!==a);throw new Error("Offset is bigger than container's contents length.")}function Un({url:a,index:e,length:t},i,n){const s=i._textHighlighter,[{begin:r,end:o}]=s._convertMatches([e],[t]),l=new Range;return l.setStart(...mt(s.textDivs[r.divIdx],r.offset)),l.setEnd(...mt(s.textDivs[o.divIdx],o.offset)),{id:`inferred_link_${n}`,unsafeUrl:a,url:a,annotationType:yt.LINK,rotation:0,...Hn(l,i),borderStyle:null}}class Wn{static#e=0;static#t;static#s;static findLinks(e){this.#t??=new RegExp("\\b(?:https?:\\/\\/|mailto:|www\\.)(?:[\\S--[\\p{P}<>]]|\\/|[\\S--[\\[\\]]]+[\\S--[\\p{P}<>]])+|(?=\\p{L})[\\S--[@\\p{Ps}\\p{Pe}<>]]+@([\\S--[[\\p{P}--\\-]<>]]+(?:\\.[\\S--[[\\p{P}--\\-]<>]]+)+)","gmv");const[t,i]=be(e,{ignoreDashEOL:!0}),n=t.matchAll(this.#t),s=[];for(const r of n){const[o,l]=r;let d;if(o.startsWith("www.")||o.startsWith("http://")||o.startsWith("https://"))d=o;else if(l){const f=URL.parse(`http://${l}`)?.hostname;if(!f||(this.#s??=/\.\d+$/,this.#s.test(f)))continue}d??=o.startsWith("mailto:")?o:`mailto:${o}`;const h=Pt(d,null,{addDefaultProtocol:!0});if(h){const[f,c]=Lt(i,r.index,o.length);s.push({url:h.href,index:f,length:c})}}return s}static processLinks(e){return this.findLinks(e._textHighlighter.textContentItemsStr.join(`
`)).map(t=>Un(t,e,this.#e++))}}class jt{#e=null;#t=0;#s=null;#n=C.INITIAL;#i=null;#r=0;#a=null;canvas=null;div=null;enableOptimizedPartialRendering=!1;eventBus=null;id=null;pageColors=null;recordedBBoxes=null;renderingQueue=null;renderTask=null;resume=null;constructor(e){this.eventBus=e.eventBus,this.id=e.id,this.pageColors=e.pageColors||null,this.renderingQueue=e.renderingQueue,this.enableOptimizedPartialRendering=e.enableOptimizedPartialRendering??!1,this.#t=e.minDurationToUpdateCanvas??500}get renderingState(){return this.#n}set renderingState(e){if(e!==this.#n)switch(this.#n=e,this.#e&&(clearTimeout(this.#e),this.#e=null),e){case C.PAUSED:this.div.classList.remove("loading"),this.#r=0,this.#i?.(!1);break;case C.RUNNING:this.div.classList.add("loadingIcon"),this.#e=setTimeout(()=>{this.div.classList.add("loading"),this.#e=null},0),this.#r=Date.now();break;case C.INITIAL:case C.FINISHED:this.div.classList.remove("loadingIcon","loading"),this.#r=0;break}}_createCanvas(e,t=!1){const{pageColors:i}=this,n=!!(i?.background&&i?.foreground),s=this.canvas,r=!s&&!n&&!t;let o=this.canvas=document.createElement("canvas");return this.#i=l=>{if(r){let d=this.#a;if(!l&&this.#t>0){if(Date.now()-this.#r<this.#t)return;d||(d=this.#a=o,o=this.canvas=o.cloneNode(!1),e(o))}if(d){o.getContext("2d",{alpha:!1}).drawImage(d,0,0),l?this.#d():this.#r=Date.now();return}e(o),this.#i=null;return}l&&(s?(s.replaceWith(o),s.width=s.height=0):e(o))},{canvas:o,prevCanvas:s}}#o=e=>{if(this.#i?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=C.PAUSED,this.resume=()=>{this.renderingState=C.RUNNING,e()};return}e()};_resetCanvas(){const{canvas:e}=this;e&&(e.remove(),e.width=e.height=0,this.canvas=null,this.#d())}#d(){this.#a&&(this.#a.width=this.#a.height=0,this.#a=null)}async _drawCanvas(e,t,i){const n=this.renderTask=this.pdfPage.render(e);n.onContinue=this.#o,n.onError=r=>{r instanceof Ae&&(t(),this.#s=null)};let s=null;try{await n.promise,this.#i?.(!0)}catch(r){if(r instanceof Ae)return;s=r,this.#i?.(!0)}finally{this.#s=s,n===this.renderTask&&(this.renderTask=null,this.enableOptimizedPartialRendering&&(this.recordedBBoxes??=n.recordedBBoxes))}if(this.renderingState=C.FINISHED,i(n),s)throw s}cancelRendering({cancelExtraDelay:e=0}={}){this.renderTask&&(this.renderTask.cancel(e),this.renderTask=null),this.resume=null}dispatchPageRender(){this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id})}dispatchPageRendered(e,t){this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:e,isDetailView:t,timestamp:performance.now(),error:this.#s})}}class $n{#e=null;async render({intent:e="display"}){e!=="display"||this.#e||this._cancelled||(this.#e=new Yt)}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}class zn extends jt{#e=null;renderingCancelled=!1;constructor({pageView:e}){super(e),this.pageView=e,this.renderingId="detail"+this.id,this.div=e.div}setPdfPage(e){this.pageView.setPdfPage(e)}get pdfPage(){return this.pageView.pdfPage}get renderingState(){return super.renderingState}set renderingState(e){this.renderingCancelled=!1,super.renderingState=e}reset({keepCanvas:e=!1}={}){const t=this.renderingCancelled||this.renderingState===C.RUNNING||this.renderingState===C.PAUSED;this.cancelRendering(),this.renderingState=C.INITIAL,this.renderingCancelled=t,e||this._resetCanvas()}#t(e){if(!this.#e)return!0;const t=this.#e.minX,i=this.#e.minY,n=this.#e.width+t,s=this.#e.height+i;if(e.minX<t||e.minY<i||e.maxX>n||e.maxY>s)return!0;const{width:r,height:o,scale:l}=this.pageView.viewport;if(this.#e.scale!==l)return!0;const d=e.minX-t,h=n-e.maxX,f=e.minY-i,c=s-e.maxY,p=.5,E=(1+p)/p;return t>0&&h/d>E||n<r&&d/h>E||i>0&&c/f>E||s<o&&f/c>E}update({visibleArea:e=null,underlyingViewUpdated:t=!1}={}){if(t){this.cancelRendering(),this.renderingState=C.INITIAL;return}if(!this.#t(e))return;const{viewport:i,maxCanvasPixels:n,capCanvasAreaFactor:s}=this.pageView,r=e.maxX-e.minX,o=e.maxY-e.minY,l=r*o*me.pixelRatio**2,h=(Math.sqrt(me.capPixels(n,s)/l)-1)/2;let f=Math.min(1,h);f<0&&(f=0);const c=r*f,p=o*f,E=Math.max(0,e.minX-c),v=Math.min(i.width,e.maxX+c),_=Math.max(0,e.minY-p),x=Math.min(i.height,e.maxY+p),y=v-E,b=x-_;this.#e={minX:E,minY:_,width:y,height:b,scale:i.scale},this.reset({keepCanvas:!0})}_getRenderingContext(e,t){const i=this.pageView._getRenderingContext(e,t,!1),n=this.pdfPage.recordedBBoxes;if(!n||!this.enableOptimizedPartialRendering)return i;const{viewport:{width:s,height:r}}=this.pageView,{width:o,height:l,minX:d,minY:h}=this.#e,f=d/s,c=h/r,p=(d+o)/s,E=(h+l)/r;return{...i,operationsFilter(v){return n.isEmpty(v)?!1:n.minX(v)<=p&&n.maxX(v)>=f&&n.minY(v)<=E&&n.maxY(v)>=c}}}async draw(){if(this.pageView.detailView!==this)return;const e=this.pageView.renderingState===C.FINISHED||this.renderingState===C.FINISHED;this.renderingState!==C.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,pdfPage:i,viewport:n}=this.pageView;if(!i)throw this.renderingState=C.FINISHED,new Error("pdfPage is not loaded");this.renderingState=C.RUNNING;const s=this.pageView._ensureCanvasWrapper(),{canvas:r,prevCanvas:o}=this._createCanvas(v=>{s.firstElementChild?.tagName==="CANVAS"?s.firstElementChild.after(v):s.prepend(v)},e);r.ariaHidden=!0,this.enableOptimizedPartialRendering&&(r.className="detailView");const{width:l,height:d}=n,h=this.#e,{pixelRatio:f}=me,c=[f,0,0,f,-h.minX*f,-h.minY*f];r.width=h.width*f,r.height=h.height*f;const{style:p}=r;p.width=`${h.width*100/l}%`,p.height=`${h.height*100/d}%`,p.top=`${h.minY*100/d}%`,p.left=`${h.minX*100/l}%`;const E=this._drawCanvas(this._getRenderingContext(r,c),()=>{this.canvas?.remove(),this.canvas=o},()=>{this.dispatchPageRendered(!1,!0)});return t.setAttribute("data-loaded",!0),this.dispatchPageRender(),E}}const bt={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Ot=new Set(["math","merror","mfrac","mi","mmultiscripts","mn","mo","mover","mpadded","mprescripts","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msubsup","msup","mtable","mtd","mtext","mtr","munder","munderover","semantics"]),Ee="http://www.w3.org/1998/Math/MathML";class wt{static get sanitizer(){return le(this,"sanitizer",_t.isSanitizerSupported?new Sanitizer({elements:[...Ot].map(e=>({name:e,namespace:Ee})),replaceWithChildrenElements:[{name:"maction",namespace:Ee}],attributes:["dir","displaystyle","mathbackground","mathcolor","mathsize","scriptlevel","encoding","display","linethickness","intent","arg","form","fence","separator","lspace","rspace","stretchy","symmetric","maxsize","minsize","largeop","movablelimits","width","height","depth","voffset","accent","accentunder","columnspan","rowspan"],comments:!1}):null)}}const Gn=/^H(\d+)$/;class Ft{#e;#t=null;#s;#n=new Map;#i;#r=null;#a=null;#o=null;constructor(e,t){this.#e=e.getStructTree(),this.#i=t}async render(){if(this.#s)return this.#s;const{promise:e,resolve:t,reject:i}=Promise.withResolvers();this.#s=e;try{this.#t=this.#h(await this.#e)}catch(n){i(n)}return this.#e=null,this.#t?.classList.add("structTree"),t(this.#t),e}async getAriaAttributes(e){try{return await this.render(),this.#n.get(e)}catch{}return null}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#d(e,t){const{alt:i,id:n,lang:s}=e;if(i!==void 0){let r=!1;const o=re(i);for(const l of e.children)if(l.type==="annotation"){let d=this.#n.get(l.id);d||(d=new Map,this.#n.set(l.id,d)),d.set("aria-label",o),r=!0}r||t.setAttribute("aria-label",o)}n!==void 0&&t.setAttribute("aria-owns",n),s!==void 0&&t.setAttribute("lang",re(s,!0))}#l(e,t){const{alt:i,bbox:n,children:s}=e,r=s?.[0];if(!this.#i||!i||!n||r?.type!=="content")return!1;const{id:o}=r;if(!o)return!1;t.setAttribute("aria-owns",o);const l=document.createElement("span");(this.#r||=new Map).set(o,l),l.setAttribute("role","img"),l.setAttribute("aria-label",re(i));const{pageHeight:d,pageX:h,pageY:f}=this.#i,c="calc(var(--total-scale-factor) *",{style:p}=l;return p.width=`${c}${n[2]-n[0]}px)`,p.height=`${c}${n[3]-n[1]}px)`,p.left=`${c}${n[0]-h}px)`,p.top=`${c}${d-n[3]+f}px)`,!0}updateTextLayer(){if(this.#r){for(const[e,t]of this.#r)document.getElementById(e)?.append(t);this.#r.clear(),this.#r=null}if(this.#a){for(const e of this.#a){const t=document.getElementById(e);t&&(t.ariaHidden=!0)}this.#a.length=0,this.#a=null}if(this.#o){for(let e=0,t=this.#o.length;e<t;e+=2){const i=this.#o[e],n=this.#o[e+1];let s="";for(const r of n){const o=document.getElementById(r);o&&(s+=o.textContent.trim()||"",o.ariaHidden="true")}s&&(i.textContent=s)}this.#o.length=0,this.#o=null}}#h(e){if(!e)return null;let t;if("role"in e){const{role:i}=e;if(Ot.has(i)){t=document.createElementNS(Ee,i);const s=[];(this.#o||=[]).push(t,s);for(const{type:r,id:o}of e.children||[])r==="content"&&o&&s.push(o)}else t=document.createElement("span");const n=i.match(Gn);if(n?(t.setAttribute("role","heading"),t.setAttribute("aria-level",n[1])):bt[i]&&t.setAttribute("role",bt[i]),i==="Figure"&&this.#l(e,t))return t;if(i==="Formula"){if(e.mathML&&wt.sanitizer){t.setHTML(e.mathML,{sanitizer:wt.sanitizer});for(const{id:s}of e.children||[])s&&(this.#a||=[]).push(s);delete e.alt}!e.mathML&&e.children.length===1&&e.children[0].role!=="math"&&(t=document.createElementNS(Ee,"math"),delete e.alt)}}if(t||=document.createElement("span"),this.#d(e,t),e.children)if(e.children.length===1&&"id"in e.children[0])this.#d(e.children[0],t);else for(const i of e.children)t.append(this.#h(i));return t}}class oe{#e=!1;#t=null;#s=new Map;#n=new Map;setTextMapping(e){this.#t=e}static#i(e,t){const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();if(i.width===0&&i.height===0)return 1;if(n.width===0&&n.height===0)return-1;const s=i.y,r=i.y+i.height,o=i.y+i.height/2,l=n.y,d=n.y+n.height,h=n.y+n.height/2;if(o<=l&&h>=r)return-1;if(h<=s&&o>=d)return 1;const f=i.x+i.width/2,c=n.x+n.width/2;return f-c}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(oe.#i),this.#s.size>0){const e=this.#t;for(const[t,i]of this.#s){if(!document.getElementById(t)){this.#s.delete(t);continue}this.#r(t,e[i])}}for(const[e,t]of this.#n)this.addPointerInTextLayer(e,t);this.#n.clear()}disable(){this.#e&&(this.#n.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e){this.#n.delete(e);return}const t=this.#t;if(!t||t.length===0)return;const{id:i}=e,n=this.#s.get(i);if(n===void 0)return;const s=t[n];this.#s.delete(i);let r=s.getAttribute("aria-owns");r?.includes(i)&&(r=r.split(" ").filter(o=>o!==i).join(" "),r?s.setAttribute("aria-owns",r):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#r(e,t){const i=t.getAttribute("aria-owns");i?.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return null;if(!this.#e)return this.#n.set(e,t),null;t&&this.removePointerInTextLayer(e);const n=this.#t;if(!n||n.length===0)return null;const s=de(n,d=>oe.#i(e,d)<0),r=Math.max(0,s-1),o=n[r];this.#r(i,o),this.#s.set(i,r);const l=o.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,i,n){const s=this.addPointerInTextLayer(i,n);if(!e.hasChildNodes())return e.append(t),s;const r=Array.from(e.childNodes).filter(l=>l!==t);if(r.length===0)return s;const o=de(r,l=>oe.#i(t,l)<0);return o===0?r[0].before(t):r[o-1].after(t),s}}class Xn{#e=null;constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||e.pageIndex===-1)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let n=0,s=0;const r=i.length-1,o=[];for(let l=0,d=e.length;l<d;l++){let h=e[l];for(;n!==r&&h>=s+i[n].length;)s+=i[n].length,n++;n===i.length&&console.error("Could not find a matching mapping");const f={begin:{divIdx:n,offset:h-s}};for(h+=t[l];n!==r&&h>s+i[n].length;)s+=i[n].length,n++;f.end={divIdx:n,offset:h-s},o.push(f)}return o}_renderMatches(e){if(e.length===0)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:n,textDivs:s}=this,r=i===t.selected.pageIdx,o=t.selected.matchIdx,l=t.state.highlightAll;let d=null;const h={offset:void 0};function f(x,y){const b=x.divIdx;return s[b].textContent="",c(b,0,x.offset,y)}function c(x,y,b,m){let P=s[x];if(P.nodeType===Node.TEXT_NODE){const L=document.createElement("span");P.before(L),L.append(P),s[x]=L,P=L}const A=n[x].substring(y,b),T=document.createTextNode(A);if(m){const L=document.createElement("span");if(L.className=`${m} appended`,L.append(T),P.append(L),m.includes("selected")){const{left:g}=L.getClientRects()[0],w=P.getBoundingClientRect().left;return g-w}return 0}return P.append(T),0}let p=o,E=p+1;if(l)p=0,E=e.length;else if(!r)return;let v=-1,_=-1;for(let x=p;x<E;x++){const y=e[x],b=y.begin;if(b.divIdx===v&&b.offset===_)continue;v=b.divIdx,_=b.offset;const m=y.end,P=r&&x===o,A=P?" selected":"";let T=0;if(!d||b.divIdx!==d.divIdx?(d!==null&&c(d.divIdx,d.offset,h.offset),f(b)):c(d.divIdx,d.offset,b.offset),b.divIdx===m.divIdx)T=c(b.divIdx,b.offset,m.offset,"highlight"+A);else{T=c(b.divIdx,b.offset,h.offset,"highlight begin"+A);for(let L=b.divIdx+1,g=m.divIdx;L<g;L++)s[L].className="highlight middle"+A;f(m,"highlight end"+A)}d=m,P&&t.scrollMatchIntoView({element:s[b.divIdx],selectedLeft:T,pageIndex:i,matchIndex:o})}d&&c(d.divIdx,d.offset,h.offset)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:n}=this,{textContentItemsStr:s,textDivs:r}=this;let o=-1;for(const h of i){const f=Math.max(o,h.begin.divIdx);for(let c=f,p=h.end.divIdx;c<=p;c++){const E=r[c];E.textContent=s[c],E.className=""}o=h.end.divIdx+1}if(!t?.highlightMatches||e)return;const l=t.pageMatches[n]||null,d=t.pageMatchesLength[n]||null;this.matches=this._convertMatches(l,d),this._renderMatches(this.matches)}}class ie{#e=!1;#t=null;#s=!1;#n=null;static#i=new Map;static#r=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:i=null,enablePermissions:n=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=i,this.#e=n===!0,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}async render({viewport:e,textContentParams:t=null}){if(this.#s&&this.#n){this.#n.update({viewport:e,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#n=new ti({textContentSource:this.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e});const{textDivs:i,textContentItemsStr:n}=this.#n;this.highlighter?.setTextMapping(i,n),this.accessibilityManager?.setTextMapping(i),await this.#n.render(),this.#s=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#a(s),this.#t?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()}hide(){!this.div.hidden&&this.#s&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#s&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#n?.cancel(),this.#n=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),ie.#o(this.div)}#a(e){const{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",i=>{if(!this.#e){const n=document.getSelection();i.clipboardData.setData("text/plain",re(qt(n.toString())))}Le(i)}),ie.#i.set(t,e),ie.#d()}static#o(e){this.#i.delete(e),this.#i.size===0&&(this.#r?.abort(),this.#r=null)}static#d(){if(this.#r)return;this.#r=new AbortController;const{signal:e}=this.#r,t=(r,o)=>{o.append(r),r.style.width="",r.style.height="",o.classList.remove("selecting")};let i=!1;document.addEventListener("pointerdown",()=>{i=!0},{signal:e}),document.addEventListener("pointerup",()=>{i=!1,this.#i.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{i=!1,this.#i.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{i||this.#i.forEach(t)},{signal:e});var n,s;document.addEventListener("selectionchange",()=>{const r=document.getSelection();if(r.rangeCount===0){this.#i.forEach(t);return}const o=new Set;for(let p=0;p<r.rangeCount;p++){const E=r.getRangeAt(p);for(const v of this.#i.keys())!o.has(v)&&E.intersectsNode(v)&&o.add(v)}for(const[p,E]of this.#i)o.has(p)?p.classList.add("selecting"):t(E,p);if(n??=getComputedStyle(this.#i.values().next().value).getPropertyValue("-moz-user-select")==="none",n)return;const l=r.getRangeAt(0),d=s&&(l.compareBoundaryPoints(Range.END_TO_END,s)===0||l.compareBoundaryPoints(Range.START_TO_END,s)===0);let h=d?l.startContainer:l.endContainer;if(h.nodeType===Node.TEXT_NODE&&(h=h.parentNode),!d&&l.endOffset===0)do{for(;!h.previousSibling;)h=h.parentNode;h=h.previousSibling}while(!h.childNodes.length);const f=h.parentElement?.closest(".textLayer"),c=this.#i.get(f);c&&(c.style.width=f.style.width,c.style.height=f.style.height,c.style.userSelect="text",h.parentElement.insertBefore(c,d?h:h.nextSibling)),s=l.cloneRange()},{signal:e})}}class Vt{constructor({pdfPage:e,annotationStorage:t=null,linkService:i,xfaHtml:n=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=i,this.xfaHtml=n,this.div=null,this._cancelled=!1}async render({viewport:e,intent:t="display"}){if(t==="print"){const s={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div=document.createElement("div"),s.div=this.div,ye.render(s)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const n={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?ye.update(n):(this.div=document.createElement("div"),n.div=this.div,ye.render(n))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const Kn={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new je}},Yn=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class Bt extends jt{#e=H.ENABLE_FORMS;#t=null;#s=null;#n=!0;#i=!1;#r=!1;#a=null;#o=!1;#d=null;#l=null;#h=1;#p=1;#c=B.ENABLE;#f=1;#m={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#u=[null,null,null,null];constructor(e){super(e);const t=e.container,i=e.defaultViewport;this.renderingId="page"+this.id,this.#a=e.layerProperties||Kn,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||Ct,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#c=e.textLayerMode??B.ENABLE,this.#e=e.annotationMode??H.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.enableDetailCanvas=e.enableDetailCanvas??!0,this.maxCanvasPixels=e.maxCanvasPixels??ae.get("maxCanvasPixels"),this.maxCanvasDim=e.maxCanvasDim||ae.get("maxCanvasDim"),this.capCanvasAreaFactor=e.capCanvasAreaFactor??ae.get("capCanvasAreaFactor"),this.#n=e.enableAutoLinking!==!1,this.#s=e.commentManager||null,this.l10n=e.l10n,this.l10n||=new $,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null,this.detailView=null;const n=document.createElement("div");if(n.className="page",n.setAttribute("data-page-number",this.id),n.setAttribute("role","region"),n.setAttribute("data-l10n-id","pdfjs-page-landmark"),n.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=n,this.#E(),t?.append(n),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*U.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);const{optionalContentConfigPromise:s}=e;s&&s.then(r=>{s===this._optionalContentConfigPromise&&(this.#m.initialOptionalContent=r.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#w(e,t){const i=Yn.get(t),n=this.#u[i];if(this.#u[i]=e,n){n.replaceWith(e);return}for(let s=i-1;s>=0;s--){const r=this.#u[s];if(r){r.after(e);return}}this.div.prepend(e)}#E(){const{div:e,viewport:t}=this;if(t.userUnit!==this.#f&&(t.userUnit!==1?e.style.setProperty("--user-unit",t.userUnit):e.style.removeProperty("--user-unit"),this.#f=t.userUnit),this.pdfPage){if(this.#l===t.rotation)return;this.#l=t.rotation}St(e,t,!0,!1)}updatePageNumber(e){if(this.id===e)return;this.id=e,this.renderingId=`page${e}`,this.pdfPage&&(this.pdfPage.pageNumber=e),this.setPageLabel(this.pageLabel);const{div:t}=this;t.setAttribute("data-page-number",e),t.setAttribute("data-l10n-args",JSON.stringify({page:e})),this._textHighlighter.pageIdx=e-1}setPdfPage(e){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*U.PDF_TO_CSS_UNITS,rotation:t}),this.#E(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return le(this,"_textHighlighter",new Xn({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#a.findController}))}#b(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}async#g(){let e=null;try{await this.annotationLayer.render({viewport:this.viewport,intent:"display",structTreeLayer:this.structTreeLayer})}catch(t){console.error("#renderAnnotationLayer:",t),e=t}finally{this.#b("annotationlayerrendered",e)}}async#y(){let e=null;try{await this.annotationEditorLayer.render({viewport:this.viewport,intent:"display"})}catch(t){console.error("#renderAnnotationEditorLayer:",t),e=t}finally{this.#b("annotationeditorlayerrendered",e)}}async#P(){try{await this.drawLayer.render({intent:"display"})}catch(e){console.error("#renderDrawLayer:",e)}}async#v(){let e=null;try{const t=await this.xfaLayer.render({viewport:this.viewport,intent:"display"});t?.textDivs&&this._textHighlighter&&this.#L(t.textDivs)}catch(t){console.error("#renderXfaLayer:",t),e=t}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#w(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#b("xfalayerrendered",e)}}async#_(){if(!this.textLayer)return;let e=null;try{await this.textLayer.render({viewport:this.viewport})}catch(t){if(t instanceof zt)return;console.error("#renderTextLayer:",t),e=t}this.#b("textlayerrendered",e),this.#I()}async#I(){if(!this.textLayer)return;const e=await this.structTreeLayer?.render();e&&(this.l10n.pause(),this.structTreeLayer?.updateTextLayer(),this.canvas&&e.parentNode!==this.canvas&&this.canvas.append(e),this.l10n.resume()),this.structTreeLayer?.show()}async#L(e){const t=await this.pdfPage.getTextContent(),i=[];for(const n of t.items)i.push(n.str);this._textHighlighter.setTextMapping(e,i),this._textHighlighter.enable()}async#A(e){try{if(await e,!this.annotationLayer)return;await this.annotationLayer.injectLinkAnnotations(Wn.processLinks(this))}catch(t){console.error("#injectLinkAnnotations:",t)}}_resetCanvas(){super._resetCanvas(),this.#d=null}reset({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,keepCanvasWrapper:s=!1,preserveDetailViewState:r=!1}={}){const o=this.pdfPage?._pdfBug??!1;this.cancelRendering({keepAnnotationLayer:e,keepAnnotationEditorLayer:t,keepXfaLayer:i,keepTextLayer:n}),this.renderingState=C.INITIAL;const l=this.div,d=l.childNodes,h=e&&this.annotationLayer?.div||null,f=t&&this.annotationEditorLayer?.div||null,c=i&&this.xfaLayer?.div||null,p=n&&this.textLayer?.div||null,E=s&&this.#t||null;for(let v=d.length-1;v>=0;v--){const _=d[v];switch(_){case h:case f:case c:case p:case E:continue}if(o&&_.classList.contains("pdfBugGroupsLayer"))continue;_.remove();const x=this.#u.indexOf(_);x>=0&&(this.#u[x]=null)}l.removeAttribute("data-loaded"),h&&this.annotationLayer.hide(),f&&this.annotationEditorLayer.hide(),c&&this.xfaLayer.hide(),p&&this.textLayer.hide(),this.structTreeLayer?.hide(),!s&&this.#t&&(this.#t=null,this._resetCanvas()),r||(this.detailView?.reset({keepCanvas:s}),s||(this.detailView=null))}toggleEditingMode(e){this.#r=e,this.hasEditableAnnotations()&&this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0})}updateVisibleArea(e){this.enableDetailCanvas&&(this.#o&&this.maxCanvasPixels>0&&e?(this.detailView??=new zn({pageView:this,enableOptimizedPartialRendering:this.enableOptimizedPartialRendering}),this.detailView.update({visibleArea:e})):this.detailView&&(this.detailView.reset(),this.detailView=null))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:n=-1}){this.scale=e||this.scale,typeof t=="number"&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(r=>{i===this._optionalContentConfigPromise&&(this.#m.initialOptionalContent=r.hasInitialVisibility)})),this.#m.directDrawing=!0;const s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*U.PDF_TO_CSS_UNITS,rotation:s}),this.#E(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.#x(),this.canvas){const r=this.#i&&this.#o,o=n>=0&&n<1e3;if(o||r){o&&!r&&this.renderingState!==C.FINISHED&&(this.cancelRendering({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:n}),this.renderingState=C.FINISHED,this.#m.directDrawing=!1),this.cssTransform({redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!o,hideTextLayer:o}),o||(this.detailView?.update({underlyingViewUpdated:!0}),this.dispatchPageRendered(!0,!1));return}}this.cssTransform({}),this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0,preserveDetailViewState:!0}),this.detailView?.update({underlyingViewUpdated:!0})}#x(){const{width:e,height:t}=this.viewport,i=this.outputScale=new me;if(this.maxCanvasPixels===0){const n=1/this.scale;i.sx*=n,i.sy*=n,this.#o=!0}else if(this.#o=i.limitCanvas(e,t,this.maxCanvasPixels,this.maxCanvasDim,this.capCanvasAreaFactor),this.#o&&this.enableDetailCanvas){const n=this.enableOptimizedPartialRendering?4:2;i.sx/=n,i.sy/=n}}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,cancelExtraDelay:s=0}={}){super.cancelRendering({cancelExtraDelay:s}),this.textLayer&&(!n||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({redrawAnnotationLayer:e=!1,redrawAnnotationEditorLayer:t=!1,redrawXfaLayer:i=!1,redrawTextLayer:n=!1,hideTextLayer:s=!1}){const{canvas:r}=this;if(!r)return;const o=this.#d;if(this.viewport!==o){const l=(360+this.viewport.rotation-o.rotation)%360;if(l===90||l===270){const{width:d,height:h}=this.viewport,f=h/d,c=d/h;r.style.transform=`rotate(${l}deg) scale(${f},${c})`}else r.style.transform=l===0?"":`rotate(${l}deg)`}e&&this.annotationLayer&&this.#g(),t&&this.annotationEditorLayer&&(this.drawLayer&&this.#P(),this.#y()),i&&this.xfaLayer&&this.#v(),this.textLayer&&(s?(this.textLayer.hide(),this.structTreeLayer?.hide()):n&&this.#_())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}_ensureCanvasWrapper(){let e=this.#t;return e||(e=this.#t=document.createElement("div"),e.classList.add("canvasWrapper"),this.#w(e,"canvasWrapper")),e}_getRenderingContext(e,t,i){return{canvas:e,transform:t,viewport:this.viewport,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors,isEditing:this.#r,recordOperations:i}}async draw(){this.renderingState!==C.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:e,l10n:t,pdfPage:i,viewport:n}=this;if(!i)throw this.renderingState=C.FINISHED,new Error("pdfPage is not loaded");this.renderingState=C.RUNNING;const s=this._ensureCanvasWrapper();if(!this.textLayer&&this.#c!==B.DISABLE&&!i.isPureXfa&&(this._accessibilityManager||=new oe,this.textLayer=new ie({pdfPage:i,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#c===B.ENABLE_PERMISSIONS,onAppend:m=>{this.l10n.pause(),this.#w(m,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#e!==H.DISABLE){const{annotationStorage:m,annotationEditorUIManager:P,downloadManager:A,enableComment:T,enableScripting:L,fieldObjectsPromise:g,hasJSActionsPromise:w,linkService:I}=this.#a;this._annotationCanvasMap||=new Map,this.annotationLayer=new Tt({pdfPage:i,annotationStorage:m,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===H.ENABLE_FORMS,linkService:I,downloadManager:A,enableComment:T,enableScripting:L,hasJSActionsPromise:w,fieldObjectsPromise:g,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:P,commentManager:this.#s,onAppend:R=>{this.#w(R,"annotationLayer")}})}const{width:r,height:o}=n;this.#d=n;const{canvas:l,prevCanvas:d}=this._createCanvas(m=>{s.prepend(m)});l.setAttribute("role","presentation"),this.outputScale||this.#x();const{outputScale:h}=this;this.#i=this.#o;const f=Xe(h.sx),c=Xe(h.sy),p=l.width=ue(ce(r*h.sx),f[0]),E=l.height=ue(ce(o*h.sy),c[0]),v=ue(ce(r),f[1]),_=ue(ce(o),c[1]);h.sx=p/v,h.sy=E/_,this.#h!==f[1]&&(e.style.setProperty("--scale-round-x",`${f[1]}px`),this.#h=f[1]),this.#p!==c[1]&&(e.style.setProperty("--scale-round-y",`${c[1]}px`),this.#p=c[1]);const x=this.enableOptimizedPartialRendering&&this.#i&&!this.recordedBBoxes,y=h.scaled?[h.sx,0,0,h.sy,0,0]:null,b=this._drawCanvas(this._getRenderingContext(l,y,x),()=>{d?.remove(),this._resetCanvas()},m=>{this.#m.regularAnnotations=!m.separateAnnots,this.dispatchPageRendered(!1,!1)}).then(async()=>{if(this.renderingState!==C.FINISHED)return;this.structTreeLayer||=new Ft(i,n.rawDims);const m=this.#_();this.annotationLayer&&(await this.#g(),this.#n&&this.annotationLayer&&this.textLayer&&await this.#A(m));const{annotationEditorUIManager:P}=this.#a;P&&(this.drawLayer||=new $n,await this.#P(),this.drawLayer.setParent(s),(this.annotationLayer||this.#e===H.DISABLE)&&(this.annotationEditorLayer||=new Bn({uiManager:P,pdfPage:i,l10n:t,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:A=>{this.#w(A,"annotationEditorLayer")}}),this.#y()))});if(i.isPureXfa){if(!this.xfaLayer){const{annotationStorage:m,linkService:P}=this.#a;this.xfaLayer=new Vt({pdfPage:i,annotationStorage:m,linkService:P})}this.#v()}return e.setAttribute("data-loaded",!0),this.dispatchPageRender(),b}setPageLabel(e){this.pageLabel=typeof e=="string"?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=this.#m;return e&&t&&i?this.canvas:null}}async function Zn(a){const{info:i,metadata:n,contentDispositionFilename:s,contentLength:r}=await a.getMetadata();return{...i,baseURL:"",filesize:r||(await a.getDownloadInfo()).length,filename:s||Zt(""),metadata:n?.getRaw(),authors:n?.get("dc:creator"),numPages:a.numPages,URL:""}}class Qn{constructor(e){this._ready=new Promise((t,i)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(i)})}async createSandbox(e){(await this._ready).create(e)}async dispatchEventInSandbox(e){const t=await this._ready;setTimeout(()=>t.dispatchEvent(e),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}class Jn{#e=null;#t=null;#s=null;#n=null;#i=null;#r=null;#a=null;#o=null;#d=!1;#l=null;#h=null;constructor({eventBus:e,externalServices:t=null,docProperties:i=null}){this.#i=e,this.#r=t,this.#s=i}setViewer(e){this.#o=e}async setDocument(e){if(this.#a&&await this.#u(),this.#a=e,!e)return;const[t,i,n]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!n){await this.#u();return}if(e!==this.#a)return;try{this.#l=this.#m()}catch(o){console.error("setDocument:",o),await this.#u();return}const s=this.#i;this.#n=new AbortController;const{signal:r}=this.#n;s._on("updatefromsandbox",o=>{o?.source===window&&this.#p(o.detail)},{signal:r}),s._on("dispatcheventinsandbox",o=>{this.#l?.dispatchEventInSandbox(o.detail)},{signal:r}),s._on("pagechanging",({pageNumber:o,previous:l})=>{o!==l&&(this.#f(l),this.#c(o))},{signal:r}),s._on("pagerendered",({pageNumber:o})=>{this._pageOpenPending.has(o)&&o===this.#o.currentPageNumber&&this.#c(o)},{signal:r}),s._on("pagesdestroy",async()=>{await this.#f(this.#o.currentPageNumber),await this.#l?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()},{signal:r});try{const o=await this.#s(e);if(e!==this.#a)return;await this.#l.createSandbox({objects:t,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...o,actions:n}}),s.dispatch("sandboxcreated",{source:this})}catch(o){console.error("setDocument:",o),await this.#u();return}await this.#l?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this.#c(this.#o.currentPageNumber,!0),Promise.resolve().then(()=>{e===this.#a&&(this.#d=!0)})}async dispatchWillSave(){return this.#l?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){return this.#l?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){if(this.#l){await this.#h?.promise,this.#h=Promise.withResolvers();try{await this.#l.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(e){throw this.#h.resolve(),this.#h=null,e}await this.#h.promise}}async dispatchDidPrint(){return this.#l?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#d}get _pageOpenPending(){return le(this,"_pageOpenPending",new Set)}get _visitedPages(){return le(this,"_visitedPages",new Map)}async#p(e){const t=this.#o,i=t.isInPresentationMode||t.isChangingPresentationMode,{id:n,siblings:s,command:r,value:o}=e;if(!n){switch(r){case"clear":console.clear();break;case"error":console.error(o);break;case"layout":if(!i){const d=gi(o);t.spreadMode=d.spreadMode}break;case"page-num":t.currentPageNumber=o+1;break;case"print":await t.pagesPromise,this.#i.dispatch("print",{source:this});break;case"println":console.log(o);break;case"zoom":i||(t.currentScaleValue=o);break;case"SaveAs":this.#i.dispatch("download",{source:this});break;case"FirstPage":t.currentPageNumber=1;break;case"LastPage":t.currentPageNumber=t.pagesCount;break;case"NextPage":t.nextPage();break;case"PrevPage":t.previousPage();break;case"ZoomViewIn":i||t.increaseScale();break;case"ZoomViewOut":i||t.decreaseScale();break;case"WillPrintFinished":this.#h?.resolve(),this.#h=null;break}return}if(i&&e.focus)return;delete e.id,delete e.siblings;const l=s?[n,...s]:[n];for(const d of l){const h=document.querySelector(`[data-element-id="${d}"]`);h?h.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):this.#a?.annotationStorage.setValue(d,e)}}async#c(e,t=!1){const i=this.#a,n=this._visitedPages;if(t&&(this.#e=Promise.withResolvers()),!this.#e)return;const s=this.#o.getPageView(e-1);if(s?.renderingState!==C.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);const r=(async()=>{const o=await(n.has(e)?null:s.pdfPage?.getJSActions());i===this.#a&&await this.#l?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:o})})();n.set(e,r)}async#f(e){const t=this.#a,i=this._visitedPages;if(!this.#e||this._pageOpenPending.has(e))return;const n=i.get(e);n&&(i.set(e,null),await n,t===this.#a&&await this.#l?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e}))}#m(){if(this.#t=Promise.withResolvers(),this.#l)throw new Error("#initScripting: Scripting already exists.");return this.#r.createScripting()}async#u(){if(!this.#l){this.#a=null,this.#t?.resolve();return}this.#e&&(await Promise.race([this.#e.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(()=>{}),this.#e=null),this.#a=null;try{await this.#l.destroySandbox()}catch{}this.#h?.reject(new Error("Scripting destroyed.")),this.#h=null,this.#n?.abort(),this.#n=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#l=null,this.#d=!1,this.#t?.resolve()}}class qn extends Jn{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new Qn(e.sandboxBundleSrc)},e.docProperties||=t=>Zn(t),super(e)}}const es=3e4;class ts{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),es)))}getHighestPriority(e,t,i,n=!1,s=!1){const r=e.views,o=r.length;if(o===0)return null;for(let c=0;c<o;c++){const p=r[c].view;if(!this.isViewFinished(p))return p}if(!s)for(let c=0;c<o;c++){const{detailView:p}=r[c].view;if(p&&!this.isViewFinished(p))return p}const l=e.first.id,d=e.last.id;if(d-l+1>o){const c=e.ids;for(let p=1,E=d-l;p<E;p++){const v=i?l+p:d-p;if(c.has(v))continue;const _=t[v-1];if(!this.isViewFinished(_))return _}}let h=i?d:l-2,f=t[h];return f&&!this.isViewFinished(f)||n&&(h+=i?1:-1,f=t[h],f&&!this.isViewFinished(f))?f:null}isViewFinished(e){return e.renderingState===C.FINISHED}renderView(e){switch(e.renderingState){case C.FINISHED:return!1;case C.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case C.RUNNING:this.highestPriorityPage=e.renderingId;break;case C.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof Ae||console.error("renderView:",t)});break}return!0}}const Et=10,pe={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function vt(a){return Object.values(O).includes(a)&&a!==O.DISABLE}class is{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#s()}resize(e,t=null){this.#t=e;const i=this.#e;if(t){const n=i.size;let s=1;for(const r of i)if(t.has(r.id)&&(i.delete(r),i.add(r)),++s>n)break}for(;i.size>this.#t;)this.#s()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#s(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class Ht{#e=null;#t=null;#s=null;#n=O.NONE;#i=null;#r=H.ENABLE_FORMS;#a=null;#o=null;#d=null;#l=!1;#h=!1;#p=!1;#c=!1;#f=!1;#m=!0;#u=null;#w=0;#E=null;#b=!0;#g=null;#y=null;#P=null;#v=!1;#_=null;#I=!1;#L=0;#A=new ResizeObserver(this.#Q.bind(this));#x=null;#C=null;#T=null;#k=!0;#N=B.ENABLE;#j=null;#U=ei.instance;constructor(e){const t="5.4.624";if(Ue!==t)throw new Error(`The API version "${Ue}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.#j=e.viewerAlert||null,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#A.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new je,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.#a=e.commentManager||null,this.#T=e.signatureManager||null,this.#d=e.editorUndoBar||null,this.findController&&(this.findController.onIsPageVisible=n=>this._getVisiblePages().ids.has(n)),this._scriptingManager=e.scriptingManager||null,this.#N=e.textLayerMode??B.ENABLE,this.#r=e.annotationMode??H.ENABLE_FORMS,this.#n=e.annotationEditorMode??O.NONE,this.#s=e.annotationEditorHighlightColors||null,this.#h=e.enableHighlightFloatingButton===!0,this.#c=e.enableUpdatedAddImage===!0,this.#f=e.enableNewAltTextWhenAddingImage===!0,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.maxCanvasDim=e.maxCanvasDim,this.capCanvasAreaFactor=e.capCanvasAreaFactor,this.enableDetailCanvas=e.enableDetailCanvas??!0,this.enableOptimizedPartialRendering=e.enableOptimizedPartialRendering??!1,this.l10n=e.l10n,this.l10n||=new $,this.#p=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#E=e.mlManager||null,this.#l=e.enableHWA||!1,this.#k=e.supportsPinchToZoom!==!1,this.#m=e.enableAutoLinking!==!1,this.#w=e.minDurationToUpdateCanvas??500,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new ts,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:i}=e;i?.addEventListener("abort",()=>{this.#A.disconnect(),this.#A=null},{once:!0}),this.scroll=oi(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=ee.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#V(),this.eventBus._on("thumbnailrendered",({pageNumber:n,pdfPage:s})=>{const r=this._pages[n-1];this.#e.has(r)||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get printingAllowed(){return this.#b}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#r===H.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#F(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i}),t&&this.#F(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=e|0;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return this._currentScale!==Pe?this._currentScale:Ct}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#S(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#S(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!At(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(e%=360,e<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#S(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return le(this,"_layerProperties",{get annotationEditorUIManager(){return e.#i},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableComment(){return!!e.#a},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#W(e){const t={annotationEditorMode:this.#n,annotationMode:this.#r,textLayerMode:this.#N};return e?(this.#b=e.includes(q.PRINT_HIGH_QUALITY)||e.includes(q.PRINT),this.eventBus.dispatch("printingallowed",{source:this,isAllowed:this.#b}),!e.includes(q.COPY)&&this.#N===B.ENABLE&&(t.textLayerMode=B.ENABLE_PERMISSIONS),e.includes(q.MODIFY_CONTENTS)||(t.annotationEditorMode=O.DISABLE),!e.includes(q.MODIFY_ANNOTATIONS)&&!e.includes(q.FILL_INTERACTIVE_FORMS)&&this.#r===H.ENABLE_FORMS&&(t.annotationMode=H.ENABLE),t):(this.#b=!0,this.eventBus.dispatch("printingallowed",{source:this,isAllowed:this.#b}),t)}async#$(e){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;const t=Promise.withResolvers(),i=new AbortController;document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t.resolve()},{signal:AbortSignal.any([e,i.signal])}),await Promise.race([this._onePageRenderedCapability.promise,t.promise]),i.abort()}async getAllText(){const e=[],t=[];for(let i=1,n=this.pdfDocument.numPages;i<=n;++i){if(this.#I)return null;t.length=0;const s=await this.pdfDocument.getPage(i),{items:r}=await s.getTextContent();for(const o of r)o.str&&t.push(o.str),o.hasEOL&&t.push(`
`);e.push(re(t.join("")))}return e.join(`
`)}#z(e,t){const i=document.getSelection(),{focusNode:n,anchorNode:s}=i;if(s&&n&&i.containsNode(this.#_)){if(this.#v||e===B.ENABLE_PERMISSIONS){Le(t);return}this.#v=!0;const{classList:r}=this.viewer;r.add("copyAll");const o=new AbortController;window.addEventListener("keydown",l=>this.#I=l.key==="Escape",{signal:o.signal}),this.getAllText().then(async l=>{l!==null&&await navigator.clipboard.writeText(l)}).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#v=!1,this.#I=!1,o.abort(),r.remove("copyAll")}),Le(t)}}setDocument(e){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#i?.destroy(),this.#i=null,this.#n=O.NONE,this.#b=!0,this.#U.pagesNumber=0),this.pdfDocument=e,!e)return;const t=e.numPages,i=e.getPage(1),n=e.getOptionalContentConfig({intent:"display"}),s=this.#p?e.getPermissions():Promise.resolve(),{eventBus:r,pageColors:o,viewer:l}=this;this.#u=new AbortController;const{signal:d}=this.#u;if(t>pe.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const c=this._scrollMode=S.PAGE;r.dispatch("scrollmodechanged",{source:this,mode:c})}this._pagesCapability.promise.then(()=>{r.dispatch("pagesloaded",{source:this,pagesCount:t})},()=>{});const h=c=>{const p=this._pages[c.pageNumber-1];p&&this.#e.push(p)};r._on("pagerender",h,{signal:d});const f=c=>{c.cssTransform||c.isDetailView||(this._onePageRenderedCapability.resolve({timestamp:c.timestamp}),r._off("pagerendered",f))};r._on("pagerendered",f,{signal:d}),Promise.all([i,s]).then(([c,p])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(c),this._optionalContentConfigPromise=n;const{annotationEditorMode:E,annotationMode:v,textLayerMode:_}=this.#W(p);if(_!==B.DISABLE){const m=this.#_=document.createElement("div");m.id="hiddenCopyElement",l.before(m)}if(E!==O.DISABLE){const m=E;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):vt(m)?(this.#i=new Xt(this.container,l,this.#j,this.#t,this.#a,this.#T,r,e,o,this.#s,this.#h,this.#c,this.#f,this.#E,this.#d,this.#k),r.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#i}),m!==O.NONE&&(this.#H(m),this.#i.updateMode(m))):console.error(`Invalid AnnotationEditor mode: ${m}`)}const x=this._scrollMode===S.PAGE?null:l,y=this.currentScale,b=c.getViewport({scale:y*U.PDF_TO_CSS_UNITS});l.style.setProperty("--scale-factor",b.scale),o?.background&&l.style.setProperty("--page-bg-color",o.background),(o?.foreground==="CanvasText"||o?.background==="Canvas")&&(l.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),l.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let m=1;m<=t;++m){const P=new Bt({container:x,eventBus:r,id:m,scale:y,defaultViewport:b.clone(),optionalContentConfigPromise:n,renderingQueue:this.renderingQueue,textLayerMode:_,annotationMode:v,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,maxCanvasDim:this.maxCanvasDim,capCanvasAreaFactor:this.capCanvasAreaFactor,enableDetailCanvas:this.enableDetailCanvas,enableOptimizedPartialRendering:this.enableOptimizedPartialRendering,pageColors:o,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#l,enableAutoLinking:this.#m,minDurationToUpdateCanvas:this.#w,commentManager:this.#a});this._pages.push(P)}this._pages[0]?.setPdfPage(c),this._scrollMode===S.PAGE?this.#R():this._spreadMode!==j.NONE&&this._updateSpreadMode(),r._on("annotationeditorlayerrendered",m=>{this.#i&&r.dispatch("annotationeditormodechanged",{source:this,mode:this.#n})},{once:!0,signal:d}),this.#$(d).then(async()=>{if(e!==this.pdfDocument)return;if(this.findController?.setDocument(e),this._scriptingManager?.setDocument(e),this.#_&&document.addEventListener("copy",this.#z.bind(this,_),{signal:d}),e.loadingParams.disableAutoFetch||t>pe.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let m=t-1;if(m<=0){this._pagesCapability.resolve();return}for(let P=2;P<=t;++P){const A=e.getPage(P).then(T=>{const L=this._pages[P-1];L.pdfPage||L.setPdfPage(T),--m===0&&this._pagesCapability.resolve()},T=>{console.error(`Unable to get page ${P} to initialize viewer`,T),--m===0&&this._pagesCapability.resolve()});P%pe.PAUSE_EAGER_PAGE_INIT===0&&await A}}),r.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:m})=>{e===this.pdfDocument&&m.Language&&(l.lang=m.Language)}),this.defaultRenderingQueue&&this.update()}).catch(c=>{console.error("Unable to initialize viewer",c),this._pagesCapability.reject(c)})}async onBeforePagesEdited({pagesMapper:e}){await this._pagesCapability.promise,this._currentPageId=e.getPageId(this._currentPageNumber)}onPagesEdited({pagesMapper:e}){this._currentPageNumber=e.getPageNumber(this._currentPageId);const t=this._pages,i=this._pages=[];for(let s=0,r=e.pagesNumber;s<r;s++){const o=e.getPrevPageNumber(s+1)-1;if(o===-1)continue;const l=t[o];i[s]=l,l.updatePageNumber(s+1)}const n=this._scrollMode===S.PAGE?null:this.viewer;if(n){n.replaceChildren();const s=document.createDocumentFragment();for(let r=0,o=e.pagesNumber;r<o;r++){const{div:l}=i[r];l.setAttribute("data-page-number",r+1),s.append(l)}n.append(s)}setTimeout(()=>{this.forceRendering()})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,i=this._pages.length;t<i;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=Pe,this._currentScaleValue=null,this._pageLabels=null,this.#e=new is(Et),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=S.VERTICAL,this._previousScrollMode=S.UNKNOWN,this._spreadMode=j.NONE,this.#x={previousPageNumber:1,scrollDown:!0,pages:[]},this.#u?.abort(),this.#u=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#_?.remove(),this.#_=null,this.#B(),this.#D()}#R(){if(this._scrollMode!==S.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#x,i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode===j.NONE&&!this.isInPresentationMode){const n=this._pages[e-1];i.append(n.div),t.pages.push(n)}else{const n=new Set,s=this._spreadMode-1;s===-1?n.add(e-1):e%2!==s?(n.add(e-1),n.add(e)):(n.add(e-2),n.add(e-1));const r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){const o=document.createElement("div");o.className="dummyPage",r.append(o)}for(const o of n){const l=this._pages[o];l&&(r.append(l.div),t.pages.push(l))}i.append(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){this.pagesCount!==0&&(this.#g&&clearTimeout(this.#g),this.#g=setTimeout(()=>{this.#g=null,this.update()},100),this.update())}#M(e,t=null){const{div:i,id:n}=e;if(this._currentPageNumber!==n&&this._setCurrentPageNumber(n),this._scrollMode===S.PAGE&&(this.#R(),this.update()),!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,r=s+i.clientWidth,{scrollLeft:o,clientWidth:l}=this.container;(this._scrollMode===S.HORIZONTAL||s<o||r>o+l)&&(t={left:0,top:0})}It(i,t),!this._currentScaleValue&&this._location&&(this._location=null)}#G(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#O(e,t,{noScroll:i=!1,preset:n=!1,drawingDelay:s=-1,origin:r=null}){if(this._currentScaleValue=t.toString(),this.#G(e)){n&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});return}this.viewer.style.setProperty("--scale-factor",e*U.PDF_TO_CSS_UNITS);const o=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:o?s:-1}),o&&(this.#C=setTimeout(()=>{this.#C=null,this.refresh()},s));const l=this._currentScale;if(this._currentScale=e,!i){let d=this._currentPageNumber,h;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(d=this._location.pageNumber,h=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:d,destArray:h,allowNegativeOffset:!0}),Array.isArray(r)){const f=e/l-1,[c,p]=this.containerTopLeft;this.container.scrollLeft+=(r[0]-p)*f,this.container.scrollTop+=(r[1]-c)*f}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:void 0}),this.defaultRenderingQueue&&this.update()}get#X(){return this._spreadMode!==j.NONE&&this._scrollMode!==S.HORIZONTAL?2:1}#S(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,this.#O(i,e,t);else{const n=this._pages[this._currentPageNumber-1];if(!n)return;let s=$e,r=ze;this.isInPresentationMode?(s=r=4,this._spreadMode!==j.NONE&&(s*=2)):this.removePageBorders?s=r=0:this._scrollMode===S.HORIZONTAL&&([s,r]=[r,s]);const o=(this.container.clientWidth-s)/n.width*n.scale/this.#X,l=(this.container.clientHeight-r)/n.height*n.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=l;break;case"page-fit":i=Math.min(o,l);break;case"auto":const d=Ke(n)?o:Math.min(l,o);i=Math.min(ai,d);break;default:console.error(`#setScale: "${e}" is an unknown zoom value.`);return}t.preset=!0,this.#O(i,e,t)}}#F(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#S(this._currentScaleValue,{noScroll:!0}),this.#M(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:n=!1,center:s=null}){if(!this.pdfDocument)return;const r=Number.isInteger(e)&&this._pages[e-1];if(!r){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,!0);return}let o=0,l=0,d=0,h=0,f,c;const p=r.rotation%180!==0,E=(p?r.height:r.width)/r.scale/U.PDF_TO_CSS_UNITS,v=(p?r.width:r.height)/r.scale/U.PDF_TO_CSS_UNITS;let _=0;switch(t[1].name){case"XYZ":o=t[2],l=t[3],_=t[4],o=o!==null?o:0,l=l!==null?l:v;break;case"Fit":case"FitB":_="page-fit";break;case"FitH":case"FitBH":l=t[2],_="page-width",l===null&&this._location?(o=this._location.left,l=this._location.top):(typeof l!="number"||l<0)&&(l=v);break;case"FitV":case"FitBV":o=t[2],d=E,h=v,_="page-height";break;case"FitR":o=t[2],l=t[3],d=t[4]-o,h=t[5]-l;let m=$e,P=ze;this.removePageBorders&&(m=P=0),f=(this.container.clientWidth-m)/d/U.PDF_TO_CSS_UNITS,c=(this.container.clientHeight-P)/h/U.PDF_TO_CSS_UNITS,_=Math.min(Math.abs(f),Math.abs(c));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(n||(_&&_!==this._currentScale?this.currentScaleValue=_:this._currentScale===Pe&&(this.currentScaleValue=ni)),_==="page-fit"&&!t[4]){this.#M(r);return}const x=[r.viewport.convertToViewportPoint(o,l),r.viewport.convertToViewportPoint(o+d,l+h)];let y=Math.min(x[0][0],x[1][0]),b=Math.min(x[0][1],x[1][1]);s?((s==="both"||s==="vertical")&&(b-=(this.container.clientHeight-Math.abs(x[1][1]-x[0][1]))/2),(s==="both"||s==="horizontal")&&(y-=(this.container.clientWidth-Math.abs(x[1][0]-x[0][0]))/2)):i||(y=Math.max(y,0),b=Math.max(b,0)),this.#M(r,{left:y,top:b})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===t?Math.round(t*1e4)/100:i,s=e.id,r=this._pages[s-1],o=this.container,l=r.getPagePoint(o.scrollLeft-e.x,o.scrollTop-e.y),d=Math.round(l[0]),h=Math.round(l[1]);let f=`#page=${s}`;this.isInPresentationMode||(f+=`&zoom=${n},${d},${h}`),this._location={pageNumber:s,scale:n,top:h,left:d,rotation:this._pagesRotation,pdfOpenParams:f}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(i===0)return;const n=Math.max(Et,2*i+1);this.#e.resize(n,e.ids);for(const{view:l,visibleArea:d}of t)l.updateVisibleArea(d);for(const l of this.#e)e.ids.has(l.id)||l.updateVisibleArea(null);this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===j.NONE&&(this._scrollMode===S.PAGE||this._scrollMode===S.VERTICAL),r=this._currentPageNumber;let o=!1;for(const l of t){if(l.percent<100)break;if(l.id===r&&s){o=!0;break}}this._setCurrentPageNumber(o?this._currentPageNumber:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#K(){const e=this._getVisiblePages(),t=[],{ids:i,views:n}=e;for(const s of n){const{view:r}=s;if(!r.hasEditableAnnotations()){i.delete(r.id);continue}t.push(s)}return t.length===0?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:i}),i)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===ee.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===ee.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===S.PAGE?this.#x.pages:this._pages,t=this._scrollMode===S.HORIZONTAL,i=t&&this._isContainerRtl;return di({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:i})}cleanup(){for(const e of this._pages)e.renderingState!==C.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}async#Y(e){if(e.pdfPage)return e.pdfPage;try{const t=await this.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(t),t}catch(t){return console.error("Unable to get page for page view",t),null}}#Z(e){if(e.first?.id===1)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case S.PAGE:return this.#x.scrollDown;case S.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),i=this.#Z(t),n=this._spreadMode!==j.NONE&&this._scrollMode!==S.HORIZONTAL,s=this.#C!==null||this.#g!==null&&t.views.some(o=>o.detailView?.renderingCancelled),r=this.renderingQueue.getHighestPriority(t,this._pages,i,n,s);return r?(this.#Y(r).then(()=>{this.renderingQueue.renderView(r)}),!0):!1}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const n=this._pages[t];if(n.width!==e.width||n.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const i=t.pdfPage.getViewport({scale:1}),n=Ke(i);if(e===void 0)e=n;else if(this.enablePrintAutoRotate&&n!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!hi(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>pe.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===S.HORIZONTAL),i.classList.toggle("scrollWrapped",t===S.WRAPPED),!(!this.pdfDocument||!e)&&(t===S.PAGE?this.#R():this._previousScrollMode===S.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#S(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!ui(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===S.PAGE)this.#R();else if(t.textContent="",this._spreadMode===j.NONE)for(const n of this._pages)t.append(n.div);else{const n=this._spreadMode-1;let s=null;for(let r=0,o=i.length;r<o;++r)s===null?(s=document.createElement("div"),s.className="spread",t.append(s)):r%2===n&&(s=s.cloneNode(!1),t.append(s)),s.append(i[r].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#S(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case S.WRAPPED:{const{views:i}=this._getVisiblePages(),n=new Map;for(const{id:s,y:r,percent:o,widthPercent:l}of i){if(o===0||l<100)continue;let d=n.get(r);d||n.set(r,d||=[]),d.push(s)}for(const s of n.values()){const r=s.indexOf(e);if(r===-1)continue;const o=s.length;if(o===1)break;if(t)for(let l=r-1,d=0;l>=d;l--){const h=s[l],f=s[l+1]-1;if(h<f)return e-f}else for(let l=r+1,d=o;l<d;l++){const h=s[l],f=s[l-1]+1;if(h>f)return f-e}if(t){const l=s[0];if(l<e)return e-l+1}else{const l=s[o-1];if(l>e)return l-e+1}break}break}case S.HORIZONTAL:break;case S.PAGE:case S.VERTICAL:{if(this._spreadMode===j.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:n}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:r,percent:o,widthPercent:l}of n)if(r===s){if(o>0&&l===100)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:i=null,origin:n}){if(i===null&&t===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&t!==1)s=Math.round(s*t*100)/100;else if(i){const r=i>0?We:1/We,o=i>0?Math.ceil:Math.floor;i=Math.abs(i);do s=o((s*r).toFixed(2)*10)/10;while(--i>0)}s=xt(s,si,ri),this.#S(s,{noScroll:!1,drawingDelay:e,origin:n})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#V(e=this.container.clientHeight){e!==this.#L&&(this.#L=e,ci.setProperty("--viewer-container-height",`${e}px`))}#Q(e){for(const t of e)if(t.target===this.container){this.#V(Math.floor(t.borderBoxSize[0].blockSize)),this.#o=null;break}}get containerTopLeft(){return this.#o||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#C!==null&&(clearTimeout(this.#C),this.#C=null),this.#g!==null&&(clearTimeout(this.#g),this.#g=null)}#D(){this.#y?.abort(),this.#y=null,this.#P!==null&&(clearTimeout(this.#P),this.#P=null)}#H(e){switch(e){case O.STAMP:this.#E?.loadModel("altText");break;case O.SIGNATURE:this.#T?.loadSignatures();break}}get annotationEditorMode(){return this.#i?this.#n:O.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:i=!1,mustEnterInEditMode:n=!1,editComment:s=!1}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");if(this.#n===e)return;if(!vt(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;this.#H(e);const{eventBus:r,pdfDocument:o}=this,l=async()=>{this.#D(),this.#n=e,await this.#i.updateMode(e,t,!0,i,n,s),!(e!==this.#n||o!==this.pdfDocument)&&r.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===O.NONE||this.#n===O.NONE){const d=e!==O.NONE;d||this.pdfDocument.annotationStorage.resetModifiedIds(),this.cleanup();for(const f of this._pages)f.toggleEditingMode(d);const h=this.#K();if(d&&h){this.#D(),this.#y=new AbortController;const f=AbortSignal.any([this.#u.signal,this.#y.signal]);r._on("pagerendered",({pageNumber:c})=>{h.delete(c),h.size===0&&(this.#P=setTimeout(l,0))},{signal:f});return}}l()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const i of this._pages)i.update(t);this.#B(),e||this.update()}}}class ns extends Ht{_resetView(){super._resetView(),this._scrollMode=S.PAGE,this._spreadMode=j.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}globalThis.pdfjsViewer={AnnotationLayerBuilder:Tt,DownloadManager:Oi,EventBus:Nt,FindState:G,GenericL10n:$,LinkTarget:Z,parseQueryString:ve,PDFFindController:ki,PDFHistory:On,PDFLinkService:Rt,PDFPageView:Bt,PDFScriptingManager:qn,PDFSinglePageViewer:ns,PDFViewer:Ht,ProgressBar:fi,RenderingStates:C,ScrollMode:S,SimpleLinkService:je,SpreadMode:j,StructTreeLayerBuilder:Ft,TextLayerBuilder:ie,XfaLayerBuilder:Vt};export{Tt as AnnotationLayerBuilder,Oi as DownloadManager,Nt as EventBus,G as FindState,$ as GenericL10n,Z as LinkTarget,ki as PDFFindController,On as PDFHistory,Rt as PDFLinkService,Bt as PDFPageView,qn as PDFScriptingManager,ns as PDFSinglePageViewer,Ht as PDFViewer,fi as ProgressBar,C as RenderingStates,S as ScrollMode,je as SimpleLinkService,j as SpreadMode,Ft as StructTreeLayerBuilder,ie as TextLayerBuilder,Vt as XfaLayerBuilder,ve as parseQueryString};
